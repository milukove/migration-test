var ml=Object.defineProperty;var bl=(w,A,b)=>A in w?ml(w,A,{enumerable:!0,configurable:!0,writable:!0,value:b}):w[A]=b;var Ue=(w,A,b)=>(bl(w,typeof A!="symbol"?A+"":A,b),b),wr=(w,A,b)=>{if(!A.has(w))throw TypeError("Cannot "+b)};var l=(w,A,b)=>(wr(w,A,"read from private field"),b?b.call(w):A.get(w)),f=(w,A,b)=>{if(A.has(w))throw TypeError("Cannot add the same private member more than once");A instanceof WeakSet?A.add(w):A.set(w,b)},g=(w,A,b,G)=>(wr(w,A,"write to private field"),G?G.call(w,b):A.set(w,b),b);var y=(w,A,b)=>(wr(w,A,"access private method"),b);(function(w,A){typeof exports=="object"&&typeof module<"u"?A(exports):typeof define=="function"&&define.amd?define(["exports"],A):(w=typeof globalThis<"u"?globalThis:w||self,A(w["Atlatl Visual Component"]={}))})(this,function(w){var Z,Je,cn,ee,de,Ae,Ot,Xe,Qe,Ce,Lt,te,Y,un,ho,ln,po,dn,go,fn,mo,vn,bo,hn,yo,pn,Eo,gn,_o,mn,wo,bn,To,yn,So,En,Ao,_n,Co,wn,Io,Ze,Rt,Ie,Tn,Oo,Sn,Lo,An,Ro,et,tt,xt,Nt,nt,Cn,xo,Mt,F,Oe,K,fe,Le,kt,Tr,In,No,On,Mo,rt,Nn,Ut,Sr,Re,ve,xe,Ne,it,ne,H,Ln,ko,Bt,Pt,J,he,Rn,Uo,ot,Mn,st,kn,Dt,Ar,at,Me,ke,pe,xn,Bo,Vt,Cr;"use strict";var A=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},b=(e,t,n)=>(A(e,t,"read from private field"),n?n.call(e):t.get(e)),G=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},D=(e,t,n,r)=>(A(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);let Ft;const Po=new Uint8Array(16);function Do(){if(!Ft&&(Ft=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ft))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ft(Po)}const R=[];for(let e=0;e<256;++e)R.push((e+256).toString(16).slice(1));function Vo(e,t=0){return R[e[t+0]]+R[e[t+1]]+R[e[t+2]]+R[e[t+3]]+"-"+R[e[t+4]]+R[e[t+5]]+"-"+R[e[t+6]]+R[e[t+7]]+"-"+R[e[t+8]]+R[e[t+9]]+"-"+R[e[t+10]]+R[e[t+11]]+R[e[t+12]]+R[e[t+13]]+R[e[t+14]]+R[e[t+15]]}const Fo=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ir={randomUUID:Fo};function Or(e,t,n){if(Ir.randomUUID&&!t&&!e)return Ir.randomUUID();e=e||{};const r=e.random||(e.rng||Do)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return Vo(r)}class Un{static error(t){console.error(t)}static log(t){}static warn(t){console.warn(t)}}let Lr;var ge,Be,re,ut,ie,oe,lt,dt;const $o=class vo{constructor(t,n,r,i){G(this,ge,void 0),G(this,Be,void 0),G(this,re,void 0),G(this,ut,void 0),G(this,ie,void 0),G(this,oe,0),G(this,lt,void 0),G(this,dt,void 0);try{D(this,ge,i),D(this,Be,t),D(this,re,{$source:t}),D(this,ut,{...n}),D(this,lt,r.sessionId),D(this,dt,r.version),Lr=this}catch(o){D(this,ie,!0),Un.warn(`DoppleAnalytics - An error occurred during initialization, tracking will be disabled. ${o.message}`)}}static get instance(){return console.warn("The 'instance' getter is deprecated and should not be used. Consider using a different approach."),Lr}static getNavigatorData(){try{return vo._getNavigatorData(window.navigator)}catch{return}}static _getNavigatorData(t){const n={};for(const r in t){if(r==="enabledPlugin"||r==="plugins")continue;const i=t[r],o=typeof i;if(o!=="function")if(o==="object"){const s=this._getNavigatorData(i);Object.keys(s).length&&(n[r]=s)}else n[r]=i}return n}async sendEvent(t,n,r=Date.now()){if(!b(this,ie))try{D(this,oe,b(this,oe)+1);const i=`${b(this,ut).url}/workspaces/${b(this,ge).workspaceId}/events`,o={id:Or(),component:b(this,Be),eventType:t,metaData:{custom:b(this,re),sessionId:b(this,lt),version:b(this,dt)},properties:n?{...n}:void 0,sequenceId:b(this,oe),timestamp:r},s=new Map;s.set("Content-Type","application/json");const a={body:o,headers:s,method:"POST"};await b(this,ge).request(i,a)}catch(i){D(this,ie,!0),Un.warn(`DoppleAnalytics - An error occurred while sending an event, further tracking will be disabled. ${i.message}`)}}async sendEvents(t){if(!b(this,ie))try{const n=`${b(this,ut).url}/workspaces/${b(this,ge).workspaceId}/events/bulk`,r=t.map(s=>(D(this,oe,b(this,oe)+1),{id:Or(),component:b(this,Be),eventType:s.eventType,metaData:{custom:b(this,re),sessionId:b(this,lt),version:b(this,dt)},properties:s.properties?{...s.properties}:void 0,sequenceId:b(this,oe),timestamp:s.timestamp||Date.now()})),i=new Map;i.set("Content-Type","application/json");const o={body:r,headers:i,method:"POST"};await b(this,ge).request(n,o)}catch(n){D(this,ie,!0),Un.warn(`DoppleAnalytics - An error occurred while sending bulk events, further tracking will be disabled. ${n.message}`)}}setMetaData(t){b(this,ie)||(D(this,re,{...t}),b(this,re).$source||(b(this,re).$source=b(this,Be)))}};ge=new WeakMap,Be=new WeakMap,re=new WeakMap,ut=new WeakMap,ie=new WeakMap,oe=new WeakMap,lt=new WeakMap,dt=new WeakMap;let Go=$o;var Rr=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Bn=(e,t,n)=>(Rr(e,t,"read from private field"),n?n.call(e):t.get(e)),xr=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Nr=(e,t,n,r)=>(Rr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ft,$t;class Ho{constructor({workspaceId:t,sessionId:n}){xr(this,ft,void 0),xr(this,$t,void 0),Nr(this,ft,n),Nr(this,$t,t)}async request(t,{query:n,method:r,body:i,headers:o=new Map}={}){const s=new URL(t);n==null||n.forEach((d,h)=>s.searchParams.append(h,d));const a=await fetch(t,{method:r,headers:{...Object.fromEntries(o),"Dopple-Sessionid":Bn(this,ft)},body:i?JSON.stringify(i):void 0});return{data:a.status!==204?await a.json():void 0,status:a.status}}get sessionId(){return Bn(this,ft)}get workspaceId(){return Bn(this,$t)}}ft=new WeakMap,$t=new WeakMap;const jo=(e,t)=>{var i,o;const n=(o=(i=t==null?void 0:t.existingSessionId)!=null?i:localStorage.getItem(`workspace:${e}.sessionId`))!=null?o:crypto.randomUUID();return localStorage.setItem(`workspace:${e}.sessionId`,n),new Ho({workspaceId:e,sessionId:n})};function qo(e,t,n,r,i){const o=document.createElement("button");o.id=`nativeUIIconButton-${e}`,o.classList.add("native-ui__icon-button"),o.innerHTML=n;const s=document.createElement("span");return o.appendChild(s),s.classList.add("native-ui__label"),s.innerText=t,r.appendChild(o),o.addEventListener("click",i),o}function zo(e){const t=document.createElement("div");t.classList.add("native-ui"),(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&t.classList.add("is-mobile");const n=document.createElement("div");t.appendChild(n),n.classList.add("native-ui__left");const r=document.createElement("button");n.appendChild(r),r.id="nativeUiOptionsButton",r.classList.add("native-ui__icon-button"),r.setAttribute("aria-expanded","false"),r.innerHTML=`<svg class="native-ui__icon" width="24" height="24" viewBox="0 0 24 24">
  <use xlink:href="#icon--options" class="line-shadow"></use>
  <g id="icon--options">
    <line x1="11" y1="6" x2="20" y2="6"></line>
    <line x1="11" y1="12" x2="20" y2="12"></line>
    <line x1="11" y1="18" x2="20" y2="18"></line>
    <line x1="5" y1="6" x2="5" y2="6.01"></line>
    <line x1="5" y1="12" x2="5" y2="12.01"></line>
    <line x1="5" y1="18" x2="5" y2="18.01"></line>
  </g>
</svg>`;const i=document.createElement("div");n.appendChild(i),i.classList.add("native-ui__pop-up-menu");const o=document.createElement("div");t.appendChild(o),o.classList.add("native-ui__right");const s=document.createElement("div");t.appendChild(s),s.classList.add("native-ui__modal-container");const a=document.createElement("div");s.appendChild(a),a.classList.add("native-ui__modal");const c=document.createElement("button");return a.appendChild(c),c.classList.add("native-ui__modal-close-button"),c.innerHTML=`<svg viewBox="0 0 14 14">
  <line x1="13" y1="1" x2="1" y2="13"></line>
  <line x1="1" y1="1" x2="13" y2="13"></line>
</svg>`,e.appendChild(t),{nativeUIIconButton:r,nativeUIModal:a,nativeUIModalCloseButton:c,nativeUIModalContainer:s,nativeUIPopUpMenu:i,nativeUIRight:o}}function Wo(e,t,n,r){const i=document.createElement("div");i.id=`nativeUIModalContent-${e}`,i.classList.add("native-ui__modal-content");const o=document.createElement("h2");return i.appendChild(o),o.classList.add("native-ui__modal-header"),o.innerText=t,r(i),n.appendChild(i),i}function Yo(e,t){e.addEventListener("click",()=>{t.classList.remove("modal-is-active")})}function Ko(e){e.addEventListener("click",t=>{t.target===e&&e.classList.remove("modal-is-active")})}function Jo(e){e.addEventListener("click",()=>{let t=e.getAttribute("aria-expanded");t==="true"?t="false":t="true",e.setAttribute("aria-expanded",t)})}function Xo(e,t,n,r,i){const o=e[r];o.location=i,Object.values(e).sort((s,a)=>s.index-a.index).forEach(s=>{let a;s.location==="bottom left"?a=t:a=n,a.appendChild(s.button)})}function Qo(e,t,n){const i=e[t].button.getElementsByTagName("svg")[0];i.outerHTML=n}function Zo(e,t,n){const i=e[t].button.getElementsByTagName("span")[0];i.innerText=n}function es(e,t,n,r){r?(Object.keys(e).forEach(i=>{e[i].classList.remove("active")}),e[n].classList.add("active"),t.classList.add("modal-is-active")):t.classList.remove("modal-is-active")}function Pn(e,t){const n=Object.keys(e).every(r=>e[r].location==="bottom left"?e[r].button.style.display==="none":!0);t.style.display=n?"none":null}var V={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},j=console,me={};Object.keys(V).forEach(function(e){me[e]=j[e]});var vt="Datadog Browser SDK:",M={debug:me.debug.bind(j,vt),log:me.log.bind(j,vt),info:me.info.bind(j,vt),warn:me.warn.bind(j,vt),error:me.error.bind(j,vt)};function Mr(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(i){M.error(t,i)}}}var ht;(function(e){e.PAGEHIDE="pagehide",e.FEATURE_FLAGS="feature_flags",e.RESOURCE_PAGE_STATES="resource_page_states",e.PAGE_STATES="page_states",e.COLLECT_FLUSH_REASON="collect_flush_reason",e.NO_RESOURCE_DURATION_FROZEN_STATE="no_resource_duration_frozen_state",e.SCROLLMAP="scrollmap",e.INTERACTION_TO_NEXT_PAINT="interaction_to_next_paint",e.WEB_VITALS_ATTRIBUTION="web_vitals_attribution",e.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css"})(ht||(ht={}));var Dn=new Set;function ts(e){e.forEach(function(t){Dn.add(t)})}function kr(e){return Dn.has(e)}function ns(){return Dn}function Vn(e){return e!==0&&Math.random()*100<=e}function Fn(e){return rs(e)&&e>=0&&e<=100}function rs(e){return typeof e=="number"}var pt=1e3,be=60*pt,is=60*be;function gt(){return new Date().getTime()}function se(){return gt()}function mt(){return performance.now()}function Pe(){return{relative:mt(),timeStamp:se()}}function os(){return{relative:0,timeStamp:Ur()}}function ss(e,t){return t-e}function as(e,t){return e+t}function cs(e){return e-Ur()}var $n;function Ur(){return $n===void 0&&($n=performance.timing.navigationStart),$n}var ae=1024,Br=1024*ae,us=/[^\u0000-\u007F]/;function Gt(e){return us.test(e)?window.TextEncoder!==void 0?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function De(e,t){return e.indexOf(t)!==-1}function Pr(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(r){return t.push(r)});else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function ls(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}function Ve(e){return Object.keys(e).map(function(t){return e[t]})}function ds(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function Dr(e,t){return e.slice(0,t.length)===t}function fs(e,t){return e.slice(-t.length)===t}function k(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}),e}function vs(e){return k({},e)}function hs(e,t){return Object.keys(e).some(function(n){return e[n]===t})}function Vr(e){return Object.keys(e).length===0}function ce(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,typeof e!="object"&&(typeof self=="object"?e=self:typeof window=="object"?e=window:e={}),e}function Fe(e,t){var n=ce(),r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=e[n.Zone.__symbol__(t)]),r||(r=e[t]),r}var ps=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Ht,Fr=!1;function gs(e){Ht=e}function ms(e){Fr=e}function bs(e,t,n){var r=n.value;n.value=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=Ht?T(r):r;return s.apply(this,i)}}function T(e){return function(){return ye(e,this,arguments)}}function ye(e,t,n){try{return e.apply(t,n)}catch(r){if(Gn(r),Ht)try{Ht(r)}catch(i){Gn(i)}}}function Gn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Fr&&M.error.apply(M,ps(["[MONITOR]"],e,!1))}function bt(e,t){return Fe(ce(),"setTimeout")(T(e),t)}function $r(e){Fe(ce(),"clearTimeout")(e)}function Hn(e,t){return Fe(ce(),"setInterval")(T(e),t)}function Gr(e){Fe(ce(),"clearInterval")(e)}var U=function(){function e(t){this.onFirstSubscribe=t,this.observers=[]}return e.prototype.subscribe=function(t){var n=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(t),{unsubscribe:function(){n.observers=n.observers.filter(function(r){return t!==r}),!n.observers.length&&n.onLastUnsubscribe&&n.onLastUnsubscribe()}}},e.prototype.notify=function(t){this.observers.forEach(function(n){return n(t)})},e}();function Hr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new U(function(){var r=e.map(function(i){return i.subscribe(function(o){return n.notify(o)})});return function(){return r.forEach(function(i){return i.unsubscribe()})}});return n}function jr(e,t,n){var r=n&&n.leading!==void 0?n.leading:!0,i=n&&n.trailing!==void 0?n.trailing:!0,o=!1,s,a;return{throttled:function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(o){s=c;return}r?e.apply(void 0,c):s=c,o=!0,a=bt(function(){i&&s&&e.apply(void 0,s),o=!1,s=void 0},t)},cancel:function(){$r(a),o=!1,s=void 0}}}function yt(){}function Ee(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,Ee)}function ys(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")),r=n.exec(e);return r?r[1]:void 0}function Es(e,t,n){n===void 0&&(n="");var r=e.charCodeAt(t-1),i=r>=55296&&r<=56319,o=i?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(n)}var qr=4*is,zr=15*be,jt;function _s(){return jt!=null?jt:jt=!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}function qt(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires=".concat(i.toUTCString()),s=r&&r.crossSite?"none":"strict",a=r&&r.domain?";domain=".concat(r.domain):"",c=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(o,";path=/;samesite=").concat(s).concat(a).concat(c)}function q(e){return ys(document.cookie,e)}function jn(e,t){qt(e,"",0,t)}function ws(e){if(document.cookie===void 0||document.cookie===null)return!1;try{var t="dd_cookie_test_".concat(Ee()),n="test";qt(t,n,be,e);var r=q(t)===n;return jn(t,e),r}catch(i){return M.error(i),!1}}var qn;function Ts(){if(qn===void 0){for(var e="dd_site_test_".concat(Ee()),t="test",n=window.location.hostname.split("."),r=n.pop();n.length&&!q(e);)r="".concat(n.pop(),".").concat(r),qt(e,t,pt,{domain:r});jn(e,{domain:r}),qn=r}return qn}var _e="_dd_s",Wr=/^([a-z]+)=([a-z0-9-]+)$/,zn="&";function Wn(e){return Vr(e)}function Yr(e){e.expire=String(gt()+zr)}function Kr(e){return ds(e).map(function(t){var n=t[0],r=t[1];return"".concat(n,"=").concat(r)}).join(zn)}function Jr(e){var t={};return Ss(e)&&e.split(zn).forEach(function(n){var r=Wr.exec(n);if(r!==null){var i=r[1],o=r[2];t[i]=o}}),t}function Ss(e){return!!e&&(e.indexOf(zn)!==-1||Wr.test(e))}var As="_dd",Cs="_dd_r",Is="_dd_l",Os="rum",Ls="logs";function Rs(e){var t=q(_e);if(!t){var n=q(As),r=q(Cs),i=q(Is),o={};n&&(o.id=n),i&&/^[01]$/.test(i)&&(o[Ls]=i),r&&/^[012]$/.test(r)&&(o[Os]=r),Wn(o)||(Yr(o),e.persistSession(o))}}function xs(e){var t=Bs(e);return ws(t)?{type:"Cookie",cookieOptions:t}:void 0}function Ns(e){var t={isLockEnabled:_s(),persistSession:Ms(e),retrieveSession:ks,clearSession:Us(e)};return Rs(t),t}function Ms(e){return function(t){qt(_e,Kr(t),zr,e)}}function ks(){var e=q(_e);return Jr(e)}function Us(e){return function(){jn(_e,e)}}function Bs(e){var t={};return t.secure=!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=Ts()),t}var Ps="_dd_test_";function Ds(){try{var e=Ee(),t="".concat(Ps).concat(e);localStorage.setItem(t,e);var n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:"LocalStorage"}:void 0}catch{return}}function Vs(){return{isLockEnabled:!1,persistSession:Fs,retrieveSession:$s,clearSession:Gs}}function Fs(e){localStorage.setItem(_e,Kr(e))}function $s(){var e=localStorage.getItem(_e);return Jr(e)}function Gs(){localStorage.removeItem(_e)}var Hs=10,js=100,Xr=[],zt;function Et(e,t,n){var r;n===void 0&&(n=0);var i=t.isLockEnabled,o=t.retrieveSession,s=t.persistSession,a=t.clearSession;if(zt||(zt=e),e!==zt){Xr.push(e);return}if(i&&n>=js){Qr(t);return}var c,u=o();if(i){if(u.lock){Wt(e,t,n);return}if(c=Ee(),u.lock=c,s(u),u=o(),u.lock!==c){Wt(e,t,n);return}}var d=e.process(u);if(i&&(u=o(),u.lock!==c)){Wt(e,t,n);return}if(d&&(Wn(d)?a():(Yr(d),s(d))),i&&!(d&&Wn(d))){if(u=o(),u.lock!==c){Wt(e,t,n);return}delete u.lock,s(u),d=u}(r=e.after)===null||r===void 0||r.call(e,d||u),Qr(t)}function Wt(e,t,n){bt(function(){Et(e,t,n+1)},Hs)}function Qr(e){zt=void 0;var t=Xr.shift();t&&Et(t,e)}var Zr=pt;function qs(e){var t=xs(e);return!t&&e.allowFallbackToLocalStorage&&(t=Ds()),t}function zs(e,t,n){var r=new U,i=new U,o=e.type==="Cookie"?Ns(e.cookieOptions):Vs(),s=o.clearSession,a=o.retrieveSession,c=Hn(_,Zr),u=B();function d(){var p;Et({process:function(I){var $=v(I);return p=E($),$},after:function(I){p&&!m()&&N(I),u=I}},o)}function h(){Et({process:function(p){return m()?v(p):void 0}},o)}function _(){Et({process:function(p){return O(p)?void 0:{}},after:v},o)}function v(p){return O(p)||(p={}),m()&&(S(p)?x():u=p),p}function E(p){var I=n(p[t]),$=I.trackingType,ct=I.isTracked;return p[t]=$,ct&&!p.id&&(p.id=Ee(),p.created=String(gt())),ct}function m(){return u[t]!==void 0}function S(p){return u.id!==p.id||u[t]!==p[t]}function x(){u={},i.notify()}function N(p){u=p,r.notify()}function B(){var p=a();return O(p)?p:{}}function O(p){return(p.created===void 0||gt()-Number(p.created)<qr)&&(p.expire===void 0||gt()<Number(p.expire))}return{expandOrRenewSession:jr(d,Zr).throttled,expandSession:h,getSession:function(){return u},renewObservable:r,expireObservable:i,expire:function(){s(),v({})},stop:function(){Gr(c)}}}function $e(e,t,n){if(typeof e!="object"||e===null)return JSON.stringify(e);var r=Ge(Object.prototype),i=Ge(Array.prototype),o=Ge(Object.getPrototypeOf(e)),s=Ge(e);try{return JSON.stringify(e,t,n)}catch{return"<error: unable to serialize object>"}finally{r(),i(),o(),s()}}function Ge(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):yt}function Yt(e){return Ws(e,Ks()).href}function Ws(e,t){var n=Ys();if(n)try{return t!==void 0?new n(e,t):new n(e)}catch(s){throw new Error("Failed to construct URL: ".concat(String(s)," ").concat($e({url:e,base:t})))}if(t===void 0&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var r=document,i=r.createElement("a");if(t!==void 0){r=document.implementation.createHTMLDocument("");var o=r.createElement("base");o.href=t,r.head.appendChild(o),r.body.appendChild(i)}return i.href=e,i}var ei=URL,Kt;function Ys(){if(Kt===void 0)try{var e=new ei("http://test/path");Kt=e.href==="http://test/path"}catch{Kt=!1}return Kt?ei:void 0}function Ks(){return Js(window.location)}function Js(e){if(e.origin&&e.origin!=="null")return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}var Xs="datad0g.com",_t="datadoghq.com",Qs="ap1.datadoghq.com",Zs="ddog-gov.com",ea={logs:"logs",rum:"rum",sessionReplay:"session-replay"},ta={logs:"logs",rum:"rum",sessionReplay:"replay"};function wt(e,t,n){var r=na(e,t);return{build:function(i,o){var s=ia(e,t,n,i,o);return r(s)},urlPrefix:r(""),endpointType:t}}function na(e,t){var n="/api/v2/".concat(ta[t]),r=e.proxy,i=e.proxyUrl;if(r){var o=Yt(r);return function(c){return"".concat(o,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(c)))}}var s=ra(e,t);if(r===void 0&&i){var a=Yt(i);return function(c){return"".concat(a,"?ddforward=").concat(encodeURIComponent("https://".concat(s).concat(n,"?").concat(c)))}}return function(c){return"https://".concat(s).concat(n,"?").concat(c)}}function ra(e,t){var n=e.site,r=n===void 0?_t:n,i=e.internalAnalyticsSubdomain;if(i&&r===_t)return"".concat(i,".").concat(_t);var o=r.split("."),s=o.pop(),a=r!==Qs?"".concat(ea[t],"."):"";return"".concat(a,"browser-intake-").concat(o.join("-"),".").concat(s)}function ia(e,t,n,r,i){var o=e.clientToken,s=e.internalAnalyticsSubdomain,a=i.retry,c=i.flushReason,u=i.encoding,d=["sdk_version:".concat("4.50.1"),"api:".concat(r)].concat(n);c&&kr(ht.COLLECT_FLUSH_REASON)&&d.push("flush_reason:".concat(c)),a&&d.push("retry_count:".concat(a.count),"retry_after:".concat(a.lastFailureStatus));var h=["ddsource=browser","ddtags=".concat(encodeURIComponent(d.join(","))),"dd-api-key=".concat(o),"dd-evp-origin-version=".concat(encodeURIComponent("4.50.1")),"dd-evp-origin=browser","dd-request-id=".concat(Ee())];return u&&h.push("dd-evp-encoding=".concat(u)),t==="rum"&&h.push("batch_time=".concat(se())),s&&h.reverse(),h.join("&")}var oa=200;function sa(e){var t=e.env,n=e.service,r=e.version,i=e.datacenter,o=[];return t&&o.push(Jt("env",t)),n&&o.push(Jt("service",n)),r&&o.push(Jt("version",r)),i&&o.push(Jt("datacenter",i)),o}var aa=/[^a-z0-9_:./-]/;function Jt(e,t){var n=oa-e.length-1;(t.length>n||aa.test(t))&&M.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function ca(e){var t=sa(e),n=ua(e,t),r=Ve(n).map(function(o){return o.urlPrefix}),i=la(e,r,t);return k({isIntakeUrl:function(o){return r.some(function(s){return o.indexOf(s)===0})},replica:i,site:e.site||_t},n)}function ua(e,t){return{logsEndpointBuilder:wt(e,"logs",t),rumEndpointBuilder:wt(e,"rum",t),sessionReplayEndpointBuilder:wt(e,"sessionReplay",t)}}function la(e,t,n){if(!!e.replica){var r=k({},e,{site:_t,clientToken:e.replica.clientToken}),i={logsEndpointBuilder:wt(r,"logs",n),rumEndpointBuilder:wt(r,"rum",n)};return t.push.apply(t,Ve(i).map(function(o){return o.urlPrefix})),k({applicationId:e.replica.applicationId},i)}}function da(e){var t,n,r;if(!e||!e.clientToken){M.error("Client Token is not configured, we will not send any data.");return}var i=(t=e.sessionSampleRate)!==null&&t!==void 0?t:e.sampleRate;if(i!==void 0&&!Fn(i)){M.error("Session Sample Rate should be a number between 0 and 100");return}if(e.telemetrySampleRate!==void 0&&!Fn(e.telemetrySampleRate)){M.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(e.telemetryConfigurationSampleRate!==void 0&&!Fn(e.telemetryConfigurationSampleRate)){M.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}return Array.isArray(e.enableExperimentalFeatures)&&ts(e.enableExperimentalFeatures.filter(function(o){return hs(ht,o)})),k({beforeSend:e.beforeSend&&Mr(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:qs(e),sessionSampleRate:i!=null?i:100,telemetrySampleRate:(n=e.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(r=e.telemetryConfigurationSampleRate)!==null&&r!==void 0?r:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16*ae,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*pt,batchMessagesLimit:50,messageBytesLimit:256*ae},ca(e))}function fa(e){var t,n,r=(t=e.proxy)!==null&&t!==void 0?t:e.proxyUrl;return{session_sample_rate:(n=e.sessionSampleRate)!==null&&n!==void 0?n:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:r!==void 0?!!r:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages}}var Tt="?";function X(e){var t=[],n=Yn(e,"stack"),r=String(e);return n&&Dr(n,r)&&(n=n.slice(r.length)),n&&n.split(`
`).forEach(function(i){var o=pa(i)||ma(i)||ya(i)||wa(i);o&&(!o.func&&o.line&&(o.func=Tt),t.push(o))}),{message:Yn(e,"message"),name:Yn(e,"name"),stack:t}}var ti="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",He="(?::(\\d+))",va=new RegExp("^\\s*at (.*?) ?\\(".concat(ti).concat(He,"?").concat(He,"?\\)?\\s*$"),"i"),ha=new RegExp("\\((\\S*)".concat(He).concat(He,"\\)"));function pa(e){var t=va.exec(e);if(!!t){var n=t[2]&&t[2].indexOf("native")===0,r=t[2]&&t[2].indexOf("eval")===0,i=ha.exec(t[2]);return r&&i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||Tt,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}var ga=new RegExp("^\\s*at ?".concat(ti).concat(He,"?").concat(He,"??\\s*$"),"i");function ma(e){var t=ga.exec(e);if(!!t)return{args:[],column:t[3]?+t[3]:void 0,func:Tt,line:t[2]?+t[2]:void 0,url:t[1]}}var ba=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function ya(e){var t=ba.exec(e);if(!!t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||Tt,line:+t[3],url:t[2]}}var Ea=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,_a=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function wa(e){var t=Ea.exec(e);if(!!t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=_a.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||Tt,line:t[4]?+t[4]:void 0,url:t[3]}}}function Yn(e,t){if(!(typeof e!="object"||!e||!(t in e))){var n=e[t];return typeof n=="string"?n:void 0}}function ni(e,t,n){var r=e[t],i=n(r),o=function(){if(typeof i=="function")return i.apply(this,arguments)};return e[t]=o,{stop:function(){e[t]===o?e[t]=r:i=r}}}function je(e,t,n){var r=n.before,i=n.after;return ni(e,t,function(o){return function(){var s=arguments,a;return r&&ye(r,this,s),typeof o=="function"&&(a=o.apply(this,s)),i&&ye(i,this,s),a}})}var Ta=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function Sa(e){var t=Aa(e).stop,n=Ia(e).stop;return{stop:function(){t(),n()}}}function Aa(e){return je(window,"onerror",{before:function(t,n,r,i,o){var s;if(o instanceof Error)s=X(o);else{var a=[{url:n,column:i,line:r}],c=Ca(t),u=c.name,d=c.message;s={name:u,message:d,stack:a}}e(s,o!=null?o:t)}})}function Ca(e){var t,n,r;return{}.toString.call(e)==="[object String]"&&(t=Ta.exec(e),n=t[1],r=t[2]),{name:n,message:r}}function Ia(e){return je(window,"onunhandledrejection",{before:function(t){var n=t.reason||"Empty reason",r=X(n);e(r,n)}})}var Oa=220*ae,La="$",Ra=3;function Q(e,t){var n;t===void 0&&(t=Oa);var r=Ge(Object.prototype),i=Ge(Array.prototype),o=[],s=new WeakMap,a=Kn(e,La,void 0,o,s),c=((n=JSON.stringify(a))===null||n===void 0?void 0:n.length)||0;if(c>t){Jn(t,"discarded",e);return}for(;o.length>0&&c<t;){var u=o.shift(),d=0;if(Array.isArray(u.source))for(var h=0;h<u.source.length;h++){var _=Kn(u.source[h],u.path,h,o,s);if(_!==void 0?c+=JSON.stringify(_).length:c+=4,c+=d,d=1,c>t){Jn(t,"truncated",e);break}u.target[h]=_}else for(var h in u.source)if(Object.prototype.hasOwnProperty.call(u.source,h)){var _=Kn(u.source[h],u.path,h,o,s);if(_!==void 0&&(c+=JSON.stringify(_).length+d+h.length+Ra,d=1),c>t){Jn(t,"truncated",e);break}u.target[h]=_}}return r(),i(),a}function Kn(e,t,n,r,i){var o=Ma(e);if(!o||typeof o!="object")return xa(o);var s=Na(o);if(s!=="[Object]"&&s!=="[Array]"&&s!=="[Error]")return s;var a=e;if(i.has(a))return"[Reference seen at ".concat(i.get(a),"]");var c=n!==void 0?"".concat(t,".").concat(n):t,u=Array.isArray(o)?[]:{};return i.set(a,c),r.push({source:o,target:u,path:c}),u}function xa(e){return typeof e=="bigint"?"[BigInt] ".concat(e.toString()):typeof e=="function"?"[Function] ".concat(e.name||"unknown"):typeof e=="symbol"?"[Symbol] ".concat(e.description||e.toString()):e}function Na(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e),n=t.match(/\[object (.*)\]/);if(n&&n[1])return"[".concat(n[1],"]")}catch{}return"[Unserializable]"}function Ma(e){var t=e;if(t&&typeof t.toJSON=="function")try{return t.toJSON()}catch{}return e}function Jn(e,t,n){M.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)}var ri="No stack, consider using an instance of Error";function ii(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,i=e.startClocks,o=e.nonErrorPrefix,s=e.source,a=e.handling,c=n instanceof Error,u=ka(t,c,o,n),d=Ua(c,t)?we(t):ri,h=c?Da(n,s):void 0,_=t==null?void 0:t.name,v=oi(n);return{startClocks:i,source:s,handling:a,handlingStack:r,originalError:n,type:_,message:u,stack:d,causes:h,fingerprint:v}}function ka(e,t,n,r){return(e==null?void 0:e.message)&&(e==null?void 0:e.name)?e.message:t?"Empty message":"".concat(n," ").concat($e(Q(r)))}function Ua(e,t){return t===void 0?!1:e?!0:t.stack.length>0&&(t.stack.length>1||t.stack[0].url!==void 0)}function oi(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function we(e){var t=si(e);return e.stack.forEach(function(n){var r=n.func==="?"?"<anonymous>":n.func,i=n.args&&n.args.length>0?"(".concat(n.args.join(", "),")"):"",o=n.line?":".concat(n.line):"",s=n.line&&n.column?":".concat(n.column):"";t+=`
  at `.concat(r).concat(i," @ ").concat(n.url).concat(o).concat(s)}),t}function Ba(e){var t;return(t=/@ (.+)/.exec(e))===null||t===void 0?void 0:t[1]}function si(e){return"".concat(e.name||"Error",": ").concat(e.message)}function Pa(){var e=2,t=new Error,n;if(!t.stack)try{throw t}catch{}return ye(function(){var r=X(t);r.stack=r.stack.slice(e),n=we(r)}),n}function Da(e,t){for(var n=e,r=[];(n==null?void 0:n.cause)instanceof Error&&r.length<10;){var i=X(n.cause);r.push({message:n.cause.message,source:t,type:i==null?void 0:i.name,stack:i&&we(i)}),n=n.cause}return r.length?r:void 0}var L={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function Va(e){return Sa(function(t,n){e.notify(ii({stackTrace:t,originalError:n,startClocks:Pe(),nonErrorPrefix:"Uncaught",source:L.SOURCE,handling:"unhandled"}))})}function Fa(e){var t=k({version:"4.50.1",onReady:function(n){n()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return ms},enumerable:!1}),t}function $a(e,t,n){var r=e[t];e[t]=n,r&&r.q&&r.q.forEach(function(i){return Mr(i,"onReady callback threw an error:")()})}function qe(e,t,n,r,i){return Xn(e,t,[n],r,i)}function Xn(e,t,n,r,i){var o=i===void 0?{}:i,s=o.once,a=o.capture,c=o.passive,u=T(s?function(v){_(),r(v)}:r),d=c?{capture:a,passive:c}:a,h=Fe(t,"addEventListener");n.forEach(function(v){return h.call(t,v,u,d)});function _(){var v=Fe(t,"removeEventListener");n.forEach(function(E){return v.call(t,E,u,d)})}return{stop:_}}var ue={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Ga(e,t){var n=[];De(t,ue.cspViolation)&&n.push(ja(e));var r=t.filter(function(i){return i!==ue.cspViolation});return r.length&&n.push(Ha(r)),Hr.apply(void 0,n)}function Ha(e){var t=new U(function(){if(!!window.ReportingObserver){var n=T(function(i,o){return i.forEach(function(s){t.notify(qa(s))})}),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}});return t}function ja(e){var t=new U(function(){var n=qe(e,document,"securitypolicyviolation",function(r){t.notify(za(r))}).stop;return n});return t}function qa(e){var t=e.type,n=e.body;return{type:t,subtype:n.id,message:"".concat(t,": ").concat(n.message),stack:ai(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}}function za(e){var t=ue.cspViolation,n="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:ue.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(n),stack:ai(e.effectiveDirective,e.originalPolicy?"".concat(n,' of the policy "').concat(Es(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}function ai(e,t,n,r,i){return n?we({name:e,message:t,stack:[{func:"?",url:n,line:r!=null?r:void 0,column:i!=null?i:void 0}]}):void 0}function ci(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function Qn(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function Xt(e,t,n){if(n===void 0&&(n=Wa()),t===void 0)return e;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var i=Array.isArray(e)?e:[],o=0;o<t.length;++o)i[o]=Xt(i[o],t[o],n);return i}var s=Qn(e)==="object"?e:{};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=Xt(s[a],t[a],n));return s}}function Zn(e){return Xt(void 0,e)}function Te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r=0,i=e;r<i.length;r++){var o=i[r];o!=null&&(n=Xt(n,o))}return n}function Wa(){if(typeof WeakSet<"u"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(n){var r=e.has(n);return r||e.add(n),r}}}var t=[];return{hasAlreadyBeenSeen:function(n){var r=t.indexOf(n)>=0;return r||t.push(n),r}}}var er={log:"log",configuration:"configuration"},Ya=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],Ka=[Zs],z={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1},tr;function Ja(e,t){var n,r=new U;z.telemetryEnabled=!De(Ka,t.site)&&Vn(t.telemetrySampleRate),z.telemetryConfigurationEnabled=z.telemetryEnabled&&Vn(t.telemetryConfigurationSampleRate);var i=Xa();tr=function(s){if(z.telemetryEnabled){var a=o(e,s,i);r.notify(a),ci("telemetry",a)}},gs(li),k(z,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0});function o(s,a,c){return Te({type:"telemetry",date:se(),service:s,version:"4.50.1",source:"browser",_dd:{format_version:2},telemetry:Te(a,{runtime_env:c}),experimental_features:Pr(ns())},n!==void 0?n():{})}return{setContextProvider:function(s){n=s},observable:r,enabled:z.telemetryEnabled}}function Xa(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function Qa(e){return e.site===Xs}function ui(e,t){Gn(V.debug,e,t),nr(k({type:er.log,message:e,status:"debug"},t))}function li(e,t){nr(k({type:er.log,status:"error"},ec(e),t))}function Za(e){z.telemetryConfigurationEnabled&&nr({type:er.configuration,configuration:e})}function nr(e){tr&&z.sentEventCount<z.maxEventsPerPage&&(z.sentEventCount+=1,tr(e))}function ec(e){if(e instanceof Error){var t=X(e);return{error:{kind:t.name,stack:we(tc(t))},message:t.message}}return{error:{stack:ri},message:"".concat("Uncaught"," ").concat($e(e))}}function tc(e){return e.stack=e.stack.filter(function(t){return!t.url||Ya.some(function(n){return Dr(t.url,n)})}),e}var Qt=1/0,nc=be,rc=function(){function e(t,n){var r=this;this.expireDelay=t,this.maxEntries=n,this.entries=[],this.clearOldValuesInterval=Hn(function(){return r.clearOldValues()},nc)}return e.prototype.add=function(t,n){var r=this,i={value:t,startTime:n,endTime:Qt,remove:function(){var o=r.entries.indexOf(i);o>=0&&r.entries.splice(o,1)},close:function(o){i.endTime=o}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(i),i},e.prototype.find=function(t){t===void 0&&(t=Qt);for(var n=0,r=this.entries;n<r.length;n++){var i=r[n];if(i.startTime<=t){if(t<=i.endTime)return i.value;break}}},e.prototype.closeActive=function(t){var n=this.entries[0];n&&n.endTime===Qt&&n.close(t)},e.prototype.findAll=function(t,n){t===void 0&&(t=Qt),n===void 0&&(n=0);var r=as(t,n);return this.entries.filter(function(i){return i.startTime<=r&&t<=i.endTime}).map(function(i){return i.value})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){Gr(this.clearOldValuesInterval)},e.prototype.clearOldValues=function(){for(var t=mt()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<t;)this.entries.pop()},e}(),ic=be,oc=qr;function sc(e,t,n){var r=zs(e.sessionStoreStrategyType,t,n),i=new rc(oc);r.renewObservable.subscribe(function(){i.add(o(),mt())}),r.expireObservable.subscribe(function(){i.closeActive(mt())}),r.expandOrRenewSession(),i.add(o(),os().relative),ac(e,function(){return r.expandOrRenewSession()}),cc(e,function(){return r.expandSession()});function o(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return{findActiveSession:function(s){return i.find(s)},renewObservable:r.renewObservable,expireObservable:r.expireObservable,expire:r.expire}}function ac(e,t){Xn(e,window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0}).stop}function cc(e,t){var n=function(){document.visibilityState==="visible"&&t()};qe(e,document,"visibilitychange",n).stop,Hn(n,ic)}function di(e){return e>=500}function uc(e){try{return e.clone()}catch{return}}var lc=80*ae,dc=32,fi=3*Br,fc=be,vi=pt;function hi(e,t,n,r,i){t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)?gi(e,t,n,{onSuccess:function(){return mi(0,t,n,r,i)},onFailure:function(){t.queuedPayloads.enqueue(e),pi(t,n,r,i)}}):t.queuedPayloads.enqueue(e)}function pi(e,t,n,r){e.transportStatus===2&&bt(function(){var i=e.queuedPayloads.first();gi(i,e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=vi,mi(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(fc,e.currentBackoffTime*2),pi(e,t,n,r)}})},e.currentBackoffTime)}function gi(e,t,n,r){var i=r.onSuccess,o=r.onFailure;t.bandwidthMonitor.add(e),n(e,function(s){t.bandwidthMonitor.remove(e),vc(s)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:s.status},o()):(t.transportStatus=0,i())})}function mi(e,t,n,r,i){e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(i({message:"Reached max ".concat(r," events size queued for upload: ").concat(fi/Br,"MiB"),source:L.AGENT,startClocks:Pe()}),t.queueFullReported=!0);var o=t.queuedPayloads;for(t.queuedPayloads=bi();o.size()>0;)hi(o.dequeue(),t,n,r,i)}function vc(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||di(e.status))}function hc(){return{transportStatus:0,currentBackoffTime:vi,bandwidthMonitor:pc(),queuedPayloads:bi(),queueFullReported:!1}}function bi(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=fi}}}function pc(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=lc&&this.ongoingRequestCount<dc},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}}}function gc(e,t,n,r){var i=hc(),o=function(s,a){return yc(e,t,n,s,a)};return{send:function(s){hi(s,i,o,t.endpointType,r)},sendOnExit:function(s){mc(e,t,n,s)}}}function mc(e,t,n,r){var i=!!navigator.sendBeacon&&r.bytesCount<n;if(i)try{var o=t.build("beacon",r),s=navigator.sendBeacon(o,r.data);if(s)return}catch(c){bc(c)}var a=t.build("xhr",r);rr(e,a,r.data)}var yi=!1;function bc(e){yi||(yi=!0,li(e))}function yc(e,t,n,r,i){var o=Ec()&&r.bytesCount<n;if(o){var s=t.build("fetch",r);fetch(s,{method:"POST",body:r.data,keepalive:!0,mode:"cors"}).then(T(function(c){return i==null?void 0:i({status:c.status,type:c.type})}),T(function(){var c=t.build("xhr",r);rr(e,c,r.data,i)}))}else{var a=t.build("xhr",r);rr(e,a,r.data,i)}}function Ec(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function rr(e,t,n,r){var i=new XMLHttpRequest;i.open("POST",t,!0),qe(e,i,"loadend",function(){r==null||r({status:i.status})},{once:!0}),i.send(n)}function ir(){var e=_c();if(!!e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function Zt(e){var t;e===void 0&&(e=(t=ce().location)===null||t===void 0?void 0:t.hostname);var n=ir();return!!n&&n.getAllowedWebViewHosts().some(function(r){return e===r||fs(e,".".concat(r))})}function _c(){return ce().DatadogEventBridge}var St={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function wc(e){var t=new U(function(){var n=kr(ht.PAGEHIDE),r=Xn(e,window,["visibilitychange","freeze","pagehide"],function(o){o.type==="pagehide"&&n?t.notify({reason:St.PAGEHIDE}):o.type==="visibilitychange"&&document.visibilityState==="hidden"?t.notify({reason:St.HIDDEN}):o.type==="freeze"&&t.notify({reason:St.FROZEN})},{capture:!0}).stop,i=yt;return n||(i=qe(e,window,"beforeunload",function(){t.notify({reason:St.UNLOADING})}).stop),function(){r(),i()}});return t}function Tc(e){return De(Ve(St),e)}var Sc=function(){function e(t,n,r){var i=this;this.request=t,this.flushController=n,this.messageBytesLimit=r,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe(function(o){return i.flush(o)})}return e.prototype.add=function(t){this.addOrUpdate(t)},e.prototype.upsert=function(t,n){this.addOrUpdate(t,n)},e.prototype.stop=function(){this.flushSubscription.unsubscribe()},e.prototype.flush=function(t){var n=this.pushOnlyBuffer.concat(Ve(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var r={data:n.join(`
`),bytesCount:t.bytesCount,flushReason:t.reason};Tc(t.reason)?this.request.sendOnExit(r):this.request.send(r)},e.prototype.addOrUpdate=function(t,n){var r=this.process(t),i=r.processedMessage,o=r.messageBytesCount;if(o>=this.messageBytesLimit){M.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(n)&&this.remove(n),this.push(i,o,n)},e.prototype.process=function(t){var n=$e(t),r=Gt(n);return{processedMessage:n,messageBytesCount:r}},e.prototype.push=function(t,n,r){var i=this.flushController.messagesCount>0?1:0;this.flushController.notifyBeforeAddMessage(n+i),r!==void 0?this.upsertBuffer[r]=t:this.pushOnlyBuffer.push(t),this.flushController.notifyAfterAddMessage()},e.prototype.remove=function(t){var n=this.upsertBuffer[t];delete this.upsertBuffer[t];var r=Gt(n),i=this.flushController.messagesCount>1?1:0;this.flushController.notifyAfterRemoveMessage(r+i)},e.prototype.hasMessageFor=function(t){return t!==void 0&&this.upsertBuffer[t]!==void 0},e}();function Ac(e){var t=e.messagesLimit,n=e.bytesLimit,r=e.durationLimit,i=e.pageExitObservable,o=e.sessionExpireObservable,s=i.subscribe(function(m){return h(m.reason)}),a=o.subscribe(function(){return h("session_expire")}),c=new U(function(){return function(){s.unsubscribe(),a.unsubscribe()}}),u=0,d=0;function h(m){if(d!==0){var S=d,x=u;d=0,u=0,E(),c.notify({reason:m,messagesCount:S,bytesCount:x})}}var _;function v(){_===void 0&&(_=bt(function(){h("duration_limit")},r))}function E(){$r(_),_=void 0}return{flushObservable:c,get messagesCount(){return d},notifyBeforeAddMessage:function(m){u+m>=n&&h("bytes_limit"),d+=1,u+=m,v()},notifyAfterAddMessage:function(){d>=t?h("messages_limit"):u>=n&&h("bytes_limit")},notifyAfterRemoveMessage:function(m){u-=m,d-=1,d===0&&E()}}}function Ei(e,t,n,r,i,o){var s=c(e,t.endpoint),a=n&&c(e,n.endpoint);function c(u,d){return new Sc(gc(u,d,u.batchBytesLimit,r),Ac({messagesLimit:u.batchMessagesLimit,bytesLimit:u.batchBytesLimit,durationLimit:u.flushTimeout,pageExitObservable:i,sessionExpireObservable:o}),u.messageBytesLimit)}return{flushObservable:s.flushController.flushObservable,add:function(u,d){d===void 0&&(d=!0),s.add(u),a&&d&&a.add(n.transformMessage?n.transformMessage(u):u)},upsert:function(u,d){s.upsert(u,d),a&&a.upsert(n.transformMessage?n.transformMessage(u):u,d)},stop:function(){s.stop(),a==null||a.stop()}}}function Cc(e){var t=new Set;return e.forEach(function(n){return t.add(n)}),Pr(t)}var Ic=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,n){var r=this.callbacks[t];r&&r.forEach(function(i){return i(n)})},e.prototype.subscribe=function(t,n){var r=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),{unsubscribe:function(){r.callbacks[t]=r.callbacks[t].filter(function(i){return n!==i})}}},e}();function Oc(e,t,n){var r=0,i=!1;return{isLimitReached:function(){if(r===0&&bt(function(){r=0},be),r+=1,r<=t||i)return i=!1,!1;if(r===t+1){i=!0;try{n({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:L.AGENT,startClocks:Pe()})}finally{i=!1}}return!0}}}var or,sr=new WeakMap;function Lc(e){return or||(or=Rc(e)),or}function Rc(e){var t=new U(function(){var n=je(XMLHttpRequest.prototype,"open",{before:xc}).stop,r=je(XMLHttpRequest.prototype,"send",{before:function(){Nc.call(this,e,t)}}).stop,i=je(XMLHttpRequest.prototype,"abort",{before:Mc}).stop;return function(){n(),r(),i()}});return t}function xc(e,t){sr.set(this,{state:"open",method:e,url:Yt(String(t))})}function Nc(e,t){var n=this,r=sr.get(this);if(!!r){var i=r;i.state="start",i.startTime=mt(),i.startClocks=Pe(),i.isAborted=!1,i.xhr=this;var o=!1,s=je(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&a()}}).stop,a=function(){if(c(),s(),!o){o=!0;var u=r;u.state="complete",u.duration=ss(i.startClocks.timeStamp,se()),u.status=n.status,t.notify(vs(u))}},c=qe(e,this,"loadend",a).stop;t.notify(i)}}function Mc(){var e=sr.get(this);e&&(e.isAborted=!0)}var ar;function kc(){return ar||(ar=Uc()),ar}function Uc(){var e=new U(function(){if(!!window.fetch){var t=ni(window,"fetch",function(n){return function(r,i){var o,s=ye(Bc,null,[e,r,i]);return s?(o=n.call(this,s.input,s.init),ye(Pc,null,[e,o,s])):o=n.call(this,r,i),o}}).stop;return t}});return e}function Bc(e,t,n){var r=n&&n.method||t instanceof Request&&t.method||"GET",i=t instanceof Request?t.url:Yt(String(t)),o=Pe(),s={state:"start",init:n,input:t,method:r,startClocks:o,url:i};return e.notify(s),s}function Pc(e,t,n){var r=function(i){var o=n;o.state="resolve","stack"in i||i instanceof Error?(o.status=0,o.isAborted=i instanceof DOMException&&i.code===DOMException.ABORT_ERR,o.error=i):"status"in i&&(o.response=i,o.responseType=i.type,o.status=i.status,o.isAborted=!1),e.notify(o)};t.then(T(r),T(r))}var cr={};function Dc(e){var t=e.map(function(n){return cr[n]||(cr[n]=Vc(n)),cr[n]});return Hr.apply(void 0,t)}function Vc(e){var t=new U(function(){var n=j[e];return j[e]=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n.apply(console,r);var o=Pa();ye(function(){t.notify(Fc(r,e,o))})},function(){j[e]=n}});return t}function Fc(e,t,n){var r=e.map(function(a){return $c(a)}).join(" "),i,o;if(t===V.error){var s=ls(e,function(a){return a instanceof Error});i=s?we(X(s)):void 0,o=oi(s),r="console error: ".concat(r)}return{api:t,message:r,stack:i,handlingStack:n,fingerprint:o}}function $c(e){return typeof e=="string"?Q(e):e instanceof Error?si(X(e)):$e(Q(e),void 0,2)}var Gc=500,Hc=function(){function e(){this.buffer=[]}return e.prototype.add=function(t){var n=this.buffer.push(t);n>Gc&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach(function(t){return t()}),this.buffer.length=0},e}(),ze,_i=3*ae,jc=(ze={},ze[0]="feature flag evaluation",ze[1]="user",ze[2]="global context",ze[3]="logger context",ze);function qc(e,t){return e>_i?(M.warn("The ".concat(jc[t]," data exceeds the recommended ").concat(_i/ae,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning")),!0):!1}var zc=200;function en(e,t){t===void 0&&(t=Gt);var n={},r,i=!1,o=new U,s=jr(function(c){r=t($e(c)),i||(i=qc(r,e))},zc).throttled,a={getBytesCount:function(){return r},get:function(){return n},add:function(c,u){n[c]=u,s(n),o.notify()},remove:function(c){delete n[c],s(n),o.notify()},set:function(c){n=c,s(n),o.notify()},getContext:function(){return Zn(n)},setContext:function(c){Qn(c)==="object"?(n=Q(c),s(n)):a.clearContext(),o.notify()},setContextProperty:function(c,u){n[c]=Q(u),s(n),o.notify()},removeContextProperty:function(c){delete n[c],s(n),o.notify()},clearContext:function(){n={},r=0,o.notify()},changeObservable:o};return a}var Wc="_dd_c",Yc=[];function wi(e,t,n,r){r===void 0&&(r=Gt);var i=Kc(t,n),o=en(n,r);return s(),Yc.push(qe(e,window,"storage",function(c){var u=c.key;i===u&&s()})),o.changeObservable.subscribe(a),o;function s(){var c=localStorage.getItem(i),u=c!==null?JSON.parse(c):{};o.setContext(u)}function a(){localStorage.setItem(i,JSON.stringify(o.getContext()))}}function Kc(e,t){return"".concat(Wc,"_").concat(e,"_").concat(t)}function Jc(e,t,n){var r=e.getReader(),i=[],o=0;s();function s(){r.read().then(T(function(c){if(c.done){a();return}n.collectStreamBody&&i.push(c.value),o+=c.value.length,o>n.bytesLimit?a():s()}),T(function(c){return t(c)}))}function a(){r.cancel().catch(yt);var c,u;if(n.collectStreamBody){var d;if(i.length===1)d=i[0];else{d=new Uint8Array(o);var h=0;i.forEach(function(_){d.set(_,h),h+=_.length})}c=d.slice(0,n.bytesLimit),u=d.length>n.bytesLimit}t(void 0,c,u)}}var Xc="datadog-synthetics-public-id",Qc="datadog-synthetics-result-id",Zc="datadog-synthetics-injects-rum";function Ti(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||q(Zc))}function eu(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||q(Xc);return typeof e=="string"?e:void 0}function tu(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||q(Qc);return typeof e=="string"?e:void 0}function Si(e){var t=k({},e),n=["id","name","email"];return n.forEach(function(r){r in t&&(t[r]=String(t[r]))}),t}function nu(e){var t=Qn(e)==="object";return t||M.error("Unsupported user:",e),t}var ru=32*ae;function iu(e){var t=da(e),n=Ai(e.forwardConsoleLogs,Ve(V),"Forward Console Logs"),r=Ai(e.forwardReports,Ve(ue),"Forward Reports");if(!(!t||!n||!r))return e.forwardErrorsToLogs&&!De(n,V.error)&&n.push(V.error),k({forwardErrorsToLogs:e.forwardErrorsToLogs!==!1,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:ru},t)}function Ai(e,t,n){if(e===void 0)return[];if(!(e==="all"||Array.isArray(e)&&e.every(function(r){return De(t,r)}))){M.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return e==="all"?t:Cc(e)}function ou(e){var t=fa(e);return k({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},t)}var su=globalThis&&globalThis.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},C={debug:"debug",error:"error",info:"info",warn:"warn"},ur={console:"console",http:"http",silent:"silent"},au=Object.keys(C),Ci=function(){function e(t,n,r,i,o){r===void 0&&(r=ur.http),i===void 0&&(i=C.debug),o===void 0&&(o={}),this.handleLogStrategy=t,this.handlerType=r,this.level=i,this.contextManager=en(3),this.contextManager.set(k({},o,n?{logger:{name:n}}:void 0))}return e.prototype.log=function(t,n,r,i){r===void 0&&(r=C.info);var o;if(r===C.error&&(o={origin:L.LOGGER}),i!=null){var s=i instanceof Error?X(i):void 0,a=ii({stackTrace:s,originalError:i,nonErrorPrefix:"Provided",source:L.LOGGER,handling:"handled",startClocks:Pe()});o={origin:L.LOGGER,stack:a.stack,kind:a.type,message:a.message}}var c=Q(n),u=o?Te({error:o},c):c;this.handleLogStrategy({message:Q(t),context:u,status:r},this)},e.prototype.debug=function(t,n,r){this.log(t,n,C.debug,r)},e.prototype.info=function(t,n,r){this.log(t,n,C.info,r)},e.prototype.warn=function(t,n,r){this.log(t,n,C.warn,r)},e.prototype.error=function(t,n,r){this.log(t,n,C.error,r)},e.prototype.setContext=function(t){this.contextManager.set(t)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(t,n){this.contextManager.add(t,n)},e.prototype.removeContext=function(t){this.contextManager.remove(t)},e.prototype.setHandler=function(t){this.handlerType=t},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},su([bs],e.prototype,"log",null),e}(),Ii="logs";function cu(e){var t=!1,n=en(2),r=en(1),i={},o=function(){},s=new Hc,a=function(v,E,m,S){m===void 0&&(m=Zn(d())),S===void 0&&(S=se()),s.add(function(){return a(v,E,m,S)})},c=function(){},u=new Ci(function(){for(var v=[],E=0;E<arguments.length;E++)v[E]=arguments[E];return a.apply(void 0,v)});function d(){return{view:{referrer:document.referrer,url:window.location.href},context:n.getContext(),user:r.getContext()}}return Fa({logger:u,init:T(function(v){var E;if(!v){M.error("Missing configuration");return}if(c=function(){return Zn(v)},Zt()&&(v=h(v)),!!_(v)){var m=iu(v);if(!!m){if(v.storeContextsAcrossPages){var S=n.getContext();n=wi(m,Ii,2),n.setContext(Te(n.getContext(),S));var x=r.getContext();r=wi(m,Ii,1),r.setContext(Te(r.getContext(),x))}E=e(v,m,d,u),a=E.handleLog,o=E.getInternalContext,s.drain(),t=!0}}}),getLoggerGlobalContext:T(function(){return n.get()}),getGlobalContext:T(function(){return n.getContext()}),setLoggerGlobalContext:T(function(v){return n.set(v)}),setGlobalContext:T(function(v){return n.setContext(v)}),addLoggerGlobalContext:T(function(v,E){return n.add(v,E)}),setGlobalContextProperty:T(function(v,E){return n.setContextProperty(v,E)}),removeLoggerGlobalContext:T(function(v){return n.remove(v)}),removeGlobalContextProperty:T(function(v){return n.removeContextProperty(v)}),clearGlobalContext:T(function(){return n.clearContext()}),createLogger:T(function(v,E){return E===void 0&&(E={}),i[v]=new Ci(function(){for(var m=[],S=0;S<arguments.length;S++)m[S]=arguments[S];return a.apply(void 0,m)},Q(v),E.handler,E.level,Q(E.context)),i[v]}),getLogger:T(function(v){return i[v]}),getInitConfiguration:T(function(){return c()}),getInternalContext:T(function(v){return o(v)}),setUser:T(function(v){nu(v)&&r.setContext(Si(v))}),getUser:T(function(){return r.getContext()}),setUserProperty:T(function(v,E){var m,S=Si((m={},m[v]=E,m))[v];r.setContextProperty(v,S)}),removeUserProperty:T(function(v){return r.removeContextProperty(v)}),clearUser:T(function(){return r.clearContext()})});function h(v){return k({},v,{clientToken:"empty"})}function _(v){return t?(v.silentMultipleInit||M.error("DD_LOGS is already initialized."),!1):!0}}var uu="logs";function lu(e){var t=sc(e,uu,function(n){return fu(e,n)});return{findTrackedSession:function(n){var r=t.findActiveSession(n);return r&&r.trackingType==="1"?{id:r.id}:void 0},expireObservable:t.expireObservable}}function du(e){var t=Oi(e)==="1",n=t?{}:void 0;return{findTrackedSession:function(){return n},expireObservable:new U}}function Oi(e){return Vn(e.sessionSampleRate)?"1":"0"}function fu(e,t){var n=vu(t)?t:Oi(e);return{trackingType:n,isTracked:n==="1"}}function vu(e){return e==="0"||e==="1"}var We,Li=(We={},We[C.debug]=0,We[C.info]=1,We[C.warn]=2,We[C.error]=3,We);function hu(e){function t(n,r,i,o){var s=n.context;Ri(n.status,ur.console,r)&&pu(n,Te(r.getContext(),s)),e.notify(0,{rawLogsEvent:{date:o||se(),message:n.message,status:n.status,origin:L.LOGGER},messageContext:s,savedCommonContext:i,logger:r})}return{handleLog:t}}function Ri(e,t,n){var r=n.getHandler(),i=Array.isArray(r)?r:[r];return Li[e]>=Li[n.getLevel()]&&De(i,t)}function pu(e,t){me[e.status].call(j,e.message,t)}function gu(e,t,n,r,i,o){var s=au.concat(["custom"]),a={};s.forEach(function(c){a[c]=Oc(c,t.eventRateLimiterThreshold,o)}),n.subscribe(0,function(c){var u,d,h,_=c.rawLogsEvent,v=c.messageContext,E=v===void 0?void 0:v,m=c.savedCommonContext,S=m===void 0?void 0:m,x=c.logger,N=x===void 0?i:x,B=cs(_.date),O=e.findTrackedSession(B);if(!!O){var p=S||r(),I=Te({service:t.service,session_id:O.id,usr:Vr(p.user)?void 0:p.user,view:p.view},p.context,tn(B),_,N.getContext(),E);!Ri(_.status,ur.http,N)||((u=t.beforeSend)===null||u===void 0?void 0:u.call(t,I))===!1||((d=I.error)===null||d===void 0?void 0:d.origin)!==L.AGENT&&((h=a[I.status])!==null&&h!==void 0?h:a.custom).isLimitReached()||n.notify(1,I)}})}var xi=!1;function tn(e){var t=window;if(Ti()){var n=r(t.DD_RUM_SYNTHETICS);return!n&&!xi&&(xi=!0,ui("Logs sent before RUM is injected by the synthetics worker",{testId:eu(),resultId:tu()})),n}return r(t.DD_RUM);function r(i){if(i&&i.getInternalContext)return i.getInternalContext(e)}}var Se,mu=(Se={},Se[V.log]=C.info,Se[V.debug]=C.debug,Se[V.info]=C.info,Se[V.warn]=C.warn,Se[V.error]=C.error,Se);function bu(e,t){var n=Dc(e.forwardConsoleLogs).subscribe(function(r){t.notify(0,{rawLogsEvent:{date:se(),message:r.message,origin:L.CONSOLE,error:r.api===V.error?{origin:L.CONSOLE,stack:r.stack,fingerprint:r.fingerprint}:void 0,status:mu[r.api]}})});return{stop:function(){n.unsubscribe()}}}var At,yu=(At={},At[ue.cspViolation]=C.error,At[ue.intervention]=C.error,At[ue.deprecation]=C.warn,At);function Eu(e,t){var n=Ga(e,e.forwardReports).subscribe(function(r){var i=r.message,o=yu[r.type],s;o===C.error?s={kind:r.subtype,origin:L.REPORT,stack:r.stack}:r.stack&&(i+=" Found in ".concat(Ba(r.stack))),t.notify(0,{rawLogsEvent:{date:se(),message:i,origin:L.REPORT,error:s,status:o}})});return{stop:function(){n.unsubscribe()}}}function _u(e,t){if(!e.forwardErrorsToLogs)return{stop:yt};var n=Lc(e).subscribe(function(o){o.state==="complete"&&i("xhr",o)}),r=kc().subscribe(function(o){o.state==="resolve"&&i("fetch",o)});function i(o,s){!e.isIntakeUrl(s.url)&&(Au(s)||di(s.status))&&("xhr"in s?wu(s.xhr,e,a):s.response?Su(s.response,e,a):s.error&&Tu(s.error,e,a));function a(c){t.notify(0,{rawLogsEvent:{message:"".concat(Cu(o)," error ").concat(s.method," ").concat(s.url),date:s.startClocks.timeStamp,error:{origin:L.NETWORK,stack:c||"Failed to load"},http:{method:s.method,status_code:s.status,url:s.url},status:C.error,origin:L.NETWORK}})}}return{stop:function(){n.unsubscribe(),r.unsubscribe()}}}function wu(e,t,n){typeof e.response=="string"?n(lr(e.response,t)):n(e.response)}function Tu(e,t,n){n(lr(we(X(e)),t))}function Su(e,t,n){var r=uc(e);!r||!r.body?n():window.TextDecoder?Iu(r.body,t.requestErrorResponseLengthLimit,function(i,o){n(i?"Unable to retrieve response: ".concat(i):o)}):r.text().then(T(function(i){return n(lr(i,t))}),T(function(i){return n("Unable to retrieve response: ".concat(i))}))}function Au(e){return e.status===0&&e.responseType!=="opaque"}function lr(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function Cu(e){return e==="xhr"?"XHR":"Fetch"}function Iu(e,t,n){Jc(e,function(r,i,o){if(r)n(r);else{var s=new TextDecoder().decode(i);o&&(s+="..."),n(void 0,s)}},{bytesLimit:t,collectStreamBody:!0})}function Ou(e,t){if(!e.forwardErrorsToLogs)return{stop:yt};var n=new U,r=Va(n).stop,i=n.subscribe(function(o){t.notify(0,{rawLogsEvent:{message:o.message,date:o.startClocks.timeStamp,error:{kind:o.type,origin:L.SOURCE,stack:o.stack},origin:L.SOURCE,status:C.error}})});return{stop:function(){r(),i.unsubscribe()}}}var Lu=Ic;function Ru(e,t,n,r,i){var o=Ei(e,{endpoint:e.logsEndpointBuilder},e.replica&&{endpoint:e.replica.logsEndpointBuilder},n,r,i);return t.subscribe(1,function(s){o.add(s)}),o}function xu(e){var t=ir();e.subscribe(1,function(n){t.send("log",n)})}function Nu(e){return{get:function(t){var n=e.findTrackedSession(t);if(n)return{session_id:n.id}}}}function Mu(e,t,n,r){var i=new Lu,o=[];i.subscribe(1,function(m){return ci("logs",m)});var s=function(m){i.notify(0,{rawLogsEvent:{message:m.message,date:m.startClocks.timeStamp,error:{origin:L.AGENT},origin:L.AGENT,status:C.error}}),ui("Error reported to customer",{"error.message":m.message})},a=wc(t),c=t.sessionStoreStrategyType&&!Zt()&&!Ti()?lu(t):du(t),u=ku(t,s,a,c.expireObservable),d=u.telemetry,h=u.stop;o.push(function(){return h()}),d.setContextProvider(function(){var m,S,x,N,B,O;return{application:{id:(m=tn())===null||m===void 0?void 0:m.application_id},session:{id:(S=c.findTrackedSession())===null||S===void 0?void 0:S.id},view:{id:(N=(x=tn())===null||x===void 0?void 0:x.view)===null||N===void 0?void 0:N.id},action:{id:(O=(B=tn())===null||B===void 0?void 0:B.user_action)===null||O===void 0?void 0:O.id}}}),_u(t,i),Ou(t,i),bu(t,i),Eu(t,i);var _=hu(i).handleLog;if(gu(c,t,i,n,r,s),Zt())xu(i);else{var v=Ru(t,i,s,a,c.expireObservable).stop;o.push(function(){return v()})}Za(ou(e));var E=Nu(c);return{handleLog:_,getInternalContext:E.get,stop:function(){o.forEach(function(m){return m()})}}}function ku(e,t,n,r){var i=Ja("browser-logs-sdk",e),o=[];if(Zt()){var s=ir(),a=i.observable.subscribe(function(d){return s.send("internal_telemetry",d)});o.push(function(){return a.unsubscribe()})}else{var c=Ei(e,{endpoint:e.rumEndpointBuilder},e.replica&&{endpoint:e.replica.rumEndpointBuilder},t,n,r);o.push(function(){return c.stop()});var u=i.observable.subscribe(function(d){return c.add(d,Qa(e))});o.push(function(){return u.unsubscribe()})}return{telemetry:i,stop:function(){o.forEach(function(d){return d()})}}}var nn=cu(Mu);$a(ce(),"DD_LOGS",nn);const le=class{constructor(t){Ue(this,"_loggerName");this._loggerName=t}static async init(t,n,r,i){if(le._initialized=!0,!n){console.warn("The information for connecting to the logging server could not be found, cloud logs will be disabled."),le._datadogDisabled=!0;return}this._onReadyPromise=new Promise(o=>{nn.onReady(o)}),this._sessionID=r,nn.init({clientToken:n,site:"datadoghq.com",service:"atlatl-visual-component",env:t,version:i,forwardErrorsToLogs:!0,sampleRate:100,silentMultipleInit:!0}),await this._onReadyPromise}async log(t,n={},r=!1){if(!le._initialized)throw new Error("Logger is not initialized. Please call `init` before starting to log.");le._datadogDisabled||(await le._onReadyPromise,nn.logger.log(`${this._loggerName} - ${t}`,{sessionID:le._sessionID,name:this._loggerName,properties:{...n}})),r&&console.log(`${this._loggerName} - ${t}`,n)}warn(t){console.warn(`${this._loggerName} - ${t}`)}error(t){console.error(`${this._loggerName} - ${t}`)}get name(){return this._loggerName}};let P=le;Ue(P,"_initialized"),Ue(P,"_datadogDisabled"),Ue(P,"_onReadyPromise"),Ue(P,"_sessionID");const dr=new P("Extension Manager");let Ct,fr,vr;const W={};let Ni,rn;const Mi={};function Uu(e,t,n,r,i){const o=zo(i);Ct=o.nativeUIIconButton,fr=o.nativeUIPopUpMenu,vr=o.nativeUIRight,Ni=o.nativeUIModal,rn=o.nativeUIModalContainer,Jo(Ct),Yo(o.nativeUIModalCloseButton,rn),Ko(rn),on("av-native-button",e,t,n,!0),on("av-snapshot",e),on("av-ar",e,t,n),on("av-fullscreen",e),Pn(W,Ct)}function on(e,t,n=void 0,r=void 0,i=!1){const o=t.getElementsByTagName(e),s=[];!i&&o.length>1?(dr.warn(`Only one ${e} is allowed. The first instance will be used.`),s.push(o[0])):s.push(...o),s.length!==0&&Array.from(s).forEach((a,c)=>{var d,h;n&&r&&((d=a._setProductComponents)==null||d.call(a,n,r));const u={createButton:Bu,createModal:Pu,setButtonLocation:Du,setButtonVisibility:Ui,setModalVisibility:Vu};(h=a._init)==null||h.call(a,t,u,c)})}function Bu(e,t,n,r,i,o){if(ki(r)){const a=qo(e,t,n,r==="bottom left"?fr:vr,o),c=Object.keys(W).length;W[e]={button:a,index:c,location:r},Ui(e,i)}else dr.error(`The Native UI button location '${r}' is not supported.`);return{setSVG:s=>{Qo(W,e,s)},setTitle:s=>{Zo(W,e,s)}}}function Pu(e,t,n){const r=Wo(e,t,Ni,n);Mi[e]=r}function ki(e){return/^bottom (left|right)$/.test(e)}function Du(e,t){ki(t)?(Xo(W,fr,vr,e,t),Pn(W,Ct)):dr.error(`The Native UI button location '${t}' is not supported.`)}function Ui(e,t){const n=W[e];n.button.style.display=t?"flex":"none",W[e].location==="bottom left"&&Pn(W,Ct)}function Vu(e,t){es(Mi,rn,e,t)}const Bi="https://builds.dopple.io/atlatl-visual-component/releases/1.22.0",Pi="1.22.0.1208818039",Fu={}.VITE_S3_PROXY_DOMAIN_OVERRIDE,$u={}.VITE_VISUAL_COMPONENT_BCS_OVERRIDE;async function Gu(e,t){const n=$u||`https://api.dopple.io/config/v1/atlatl-visual-api/${t}`;try{const r=await fetch(n);if(!r.ok)return{};const i=await r.json();if(!i.Items||i.Count===0||i.Items.length===0)return{};const o=i.Items[0];if(!o[e].M)return{};const s=o[e].M;return!s.service_urls.M.auth.S||!s.service_urls.M.analyticsAPIService.S||!s.api_keys.M.datadogService.S?{}:{authServiceURL:s.service_urls.M.auth.S,analyticsAPIServiceURL:s.service_urls.M.analyticsAPIService.S,datadogServiceAPIKey:s.api_keys.M.datadogService.S}}catch{return{}}}async function Di(e,t){let n=await fetch(e);if(!n.ok&&(t&&(n=await fetch(t)),!n.ok))throw new Error("Error loading lib.");const r=await n.text();new Function(r)()}const Hu="api-version",ju="client-id",qu="env",zu="loading-screen-type",Wu="bg-color",Vi=document.createElement("template");Vi.innerHTML=`<style>
                        :host {
                          display: inline-block;
                        }
                        :host([hidden]) {
                          display: none;
                        }
                      </style>`;class Fi extends HTMLElement{constructor(){super();f(this,un);f(this,ln);f(this,dn);f(this,fn);f(this,vn);f(this,hn);f(this,pn);f(this,gn);f(this,mn);f(this,bn);f(this,yn);f(this,En);f(this,_n);f(this,wn);f(this,Z,void 0);f(this,Je,void 0);f(this,cn,!0);f(this,ee,void 0);f(this,de,void 0);f(this,Ae,void 0);f(this,Ot,void 0);f(this,Xe,void 0);f(this,Qe,void 0);f(this,Ce,void 0);f(this,Lt,void 0);f(this,te,void 0);f(this,Y,void 0);g(this,te,this.attachShadow({mode:"open"})),l(this,te).appendChild(Vi.content.cloneNode(!0)),y(this,un,ho).call(this),g(this,Lt,y(this,ln,po).call(this)),g(this,Je,y(this,dn,go).call(this)),g(this,Z,y(this,fn,mo).call(this))}get analytics(){return{ready:()=>y(this,En,Ao).call(this),sendCustomEvent:(n,r)=>y(this,_n,Co).call(this,n,r),setMetaData:n=>y(this,wn,Io).call(this,n)}}get visual(){return l(this,Y)}get canvas(){return l(this,Z)}async imported(){await new Promise(n=>{const r=setInterval(()=>{this.isConnected&&(clearInterval(r),n(void 0))})}),await l(this,Xe)}async ready(){await new Promise(n=>{const r=setInterval(()=>{this.isConnected&&(clearInterval(r),n(void 0))})}),await l(this,Ot)}setClientId(n){g(this,ee,n)}async connectedCallback(){y(this,vn,bo).call(this),await g(this,Ot,(async()=>{var r;g(this,Xe,y(this,hn,yo).call(this)),await l(this,Xe);const n=Array.from(await y(this,yn,So).call(this));Uu(this,n,n.map(i=>i.product),l(this,te),l(this,Je)),(r=l(this,Qe))==null||r.hide()})())}async initializeAnalytics(n){if(!n){const s="The information for connecting to the analytics server could not be found, analytics will be disabled.";throw l(this,Ce).warn(s),s}let r;try{r=jo(l(this,ee))}catch{const a="AuthClient did not initialize properly, analytics will be disabled.";throw l(this,Ce).warn(a),a}const i={url:n},o={sessionId:l(this,Y).sessionID,version:Pi};return g(this,de,new Go("atlatl-visual-component",i,o,r)),Promise.resolve()}}Z=new WeakMap,Je=new WeakMap,cn=new WeakMap,ee=new WeakMap,de=new WeakMap,Ae=new WeakMap,Ot=new WeakMap,Xe=new WeakMap,Qe=new WeakMap,Ce=new WeakMap,Lt=new WeakMap,te=new WeakMap,Y=new WeakMap,un=new WeakSet,ho=function(){const n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=`${Bi}/css/index.css`,l(this,te).appendChild(n);const r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=`${Bi}/css/native-ui.css`,l(this,te).appendChild(r)},ln=new WeakSet,po=function(){const n=document.createElement("div");return n.id="main-container",n.classList.add("main-container"),l(this,te).appendChild(n),n},dn=new WeakSet,go=function(){const n=document.createElement("div");return n.id="canvas-container",n.classList.add("canvas-container"),l(this,Lt).appendChild(n),n},fn=new WeakSet,mo=function(){const n=document.createElement("canvas");return n.id="avCanvas",l(this,Je).appendChild(n),n},vn=new WeakSet,bo=function(){const n=window.devicePixelRatio||1,r=l(this,Z).getBoundingClientRect();l(this,Z).width=r.width*n,l(this,Z).height=r.height*n},hn=new WeakSet,yo=async function(){try{await y(this,pn,Eo).call(this),await y(this,gn,_o).call(this),g(this,cn,!1);const n=await Gu(window.Atlatl.Visual.env,window.Atlatl.Visual.buildNumber);await y(this,mn,wo).call(this,n),await y(this,bn,To).call(this,n)}catch(n){console.error(n)}},pn=new WeakSet,Eo=async function(){const n=this.getAttribute(Hu),r=this.getAttribute(qu),i=this.getAttribute(zu),o=/^\d+$/;let s;const a=Fu||"https://proxy.atlatlsoftware.dev";o.exec(n)?s=`${a}/playground-local/atlatl-visual-api/builds/${n}/`:n==="latest-build"?s=`${a}/playground-local/atlatl-visual-api/builds/current/`:s=`https://builds.dopple.io/atlatl-visual-api/releases/${/^([0-9]+)\.([0-9]+)\.([0-9]+)$/.exec(n)?n:"current"}/`;const c="?vc=true";let u=`${s}index-window.js${c}`,d=`${s}index.js${c}`;r&&(u=`${s}index-${r}-window.js${c}`,d=void 0),await Di(u,d),g(this,Y,new window.Atlatl.Visual(l(this,Z)));const h={absolute:!0};i&&(h.type=i),g(this,Qe,new window.Atlatl.LoadingScreen(l(this,Y),void 0,void 0,h)),l(this,Qe).show()},gn=new WeakSet,_o=async function(){var o;const n=this.getAttribute(ju),r=this.getAttribute(Wu);n?g(this,ee,n):l(this,ee)||await new Promise(s=>{const a=setInterval(()=>{l(this,ee)&&(clearInterval(a),s(void 0))},250)});const i={showLoadingScreen:!1,backgroundColor:(o=r==null?void 0:r.split(","))==null?void 0:o.map(s=>parseFloat(s.trim()))};await l(this,Y).initClient(l(this,ee),i)},mn=new WeakSet,wo=async function(n){await P.init(window.Atlatl.Visual.env,n.datadogServiceAPIKey,l(this,Y).sessionID,Pi),g(this,Ce,new P("Visual"))},bn=new WeakSet,To=async function(n){g(this,Ae,this.initializeAnalytics(n.analyticsAPIServiceURL)),await l(this,Ae)},yn=new WeakSet,So=async function(){const n=this.getElementsByTagName("av-product");return await Promise.all(Array.from(n).map(r=>r.ready())),n},En=new WeakSet,Ao=async function(){await new Promise(n=>{const r=setInterval(()=>{l(this,Ae)!==void 0&&(clearInterval(r),n(void 0))})}),await l(this,Ae)},_n=new WeakSet,Co=async function(n,r){if(l(this,de)){const i={...r,$customEventName:n};await l(this,de).sendEvent("custom",i),await l(this,Ce).log("custom",i)}},wn=new WeakSet,Io=function(n){if(l(this,de)){l(this,de).setMetaData(n);const r={...n,$source:"atlatl-visual-component"};l(this,Y).analytics.setMetaData(r)}},customElements.get("atlatl-visual")||customElements.define("atlatl-visual",Fi);const Yu=new P("Product"),Ku="namespace",Ju="name",Xu="version";class $i extends HTMLElement{constructor(){super(...arguments);f(this,Tn);f(this,Sn);f(this,An);f(this,Ze,void 0);f(this,Rt,void 0);f(this,Ie,void 0)}get product(){return l(this,Ze)}async ready(){await new Promise(n=>{const r=setInterval(()=>{this.isConnected&&(clearInterval(r),n(void 0))})}),await l(this,Rt)}async imported(){await new Promise(n=>{const r=setInterval(()=>{l(this,Ie)!==void 0&&(clearInterval(r),n(void 0))})}),await l(this,Ie)}connectedCallback(){g(this,Rt,(async()=>{try{const n=this.closest("atlatl-visual");if(!n)throw"av-product MUST be nested underneath an 'atlatl-visual' element.";await n.imported(),g(this,Ie,y(this,Tn,Oo).call(this,n)),await l(this,Ie);const r=this.getElementsByTagName("av-binding");await Promise.all(Array.from(r).map(i=>i.ready()))}catch(n){console.error(n)}})())}}Ze=new WeakMap,Rt=new WeakMap,Ie=new WeakMap,Tn=new WeakSet,Oo=async function(n){const r=await y(this,An,Ro).call(this,n.visual);await y(this,Sn,Lo).call(this,r)},Sn=new WeakSet,Lo=async function(n){g(this,Ze,new window.Atlatl.Product(n)),await l(this,Ze).ready()},An=new WeakSet,Ro=async function(n){const r=this.getAttribute(Ku),i=this.getAttribute(Ju);if(!r||!i)throw"`namespace` and `name` attributes must be defined!";let o=this.getAttribute(Xu);o?o=parseInt(o,10):o=void 0;const s=Date.now();let a=n.tryGetProductTemplate(r,i,o);a||(a=new window.Atlatl.ProductTemplate(n,r,i,o),await a.load());const c=(Date.now()-s)/1e3;return Yu.log("Loaded",{namespace:r,name:i,version:o,timeInSeconds:c}),a},customElements.get("av-product")||customElements.define("av-product",$i);class Gi{constructor(t,n){f(this,et,void 0);f(this,tt,void 0);f(this,xt,void 0);g(this,et,new P("Product Utility")),g(this,xt,t),g(this,tt,n)}async setValue(t,n,r,i=!0,{isDefault:o}={isDefault:void 0}){i&&l(this,et).log(`setValue called with ${t} ${n} for source ${r}`);const s=l(this,tt).setValue(t,n,{isDefault:o});let a=!1;const c=()=>{a=!0};if(s.then(c,c),await new Promise(u=>setTimeout(u)),!a){const u=(d,h)=>{const _=new CustomEvent("av-option-loading-state",{detail:{loadingState:d,eventSource:h}});l(this,xt).dispatchEvent(_)};u("loading",r),await s,u("completed",r)}return s}triggerEvent(t,n=!0){n&&l(this,et).log(`triggerEvent called with ${t}`),l(this,tt).triggerEvent(t)}}et=new WeakMap,tt=new WeakMap,xt=new WeakMap;const Qu="src",Zu="binding-id";class Hi extends HTMLElement{constructor(){super(...arguments);f(this,Cn);f(this,Nt,void 0);f(this,nt,void 0)}async ready(){await new Promise(n=>{const r=setInterval(()=>{this.isConnected&&(clearInterval(r),n(void 0))})}),await l(this,nt)}async connectedCallback(){g(this,nt,(async()=>{try{const n=this.closest("av-product");if(!n)throw"av-binding MUST be nested underneath an 'av-product' element.";await n.imported(),await y(this,Cn,xo).call(this),await l(this,Nt).init(new Gi(n,n.product),void 0,P)}catch(n){console.error(n)}})()),await l(this,nt)}}Nt=new WeakMap,nt=new WeakMap,Cn=new WeakSet,xo=async function(){const n=this.getAttribute(Qu);await Di(n);const r=this.getAttribute(Zu);g(this,Nt,window.atlatlVisualBinding.construct(r))},customElements.get("av-binding")||customElements.define("av-binding",Hi);let Ye,ji,Ke;function el(){const e=document.createElement("div");Ke.appendChild(e),e.classList.add("native-ui__launch-ar-container"),e.innerHTML=`<p>Click <strong>Launch AR</strong>, then look for the AR icon button in the bottom corner of the AR preview.</p>
<p class="note"><strong>Note:</strong> make sure you are using an AR-compatible browser on your device, such as Chrome.</p>`;const t=document.createElement("div");e.appendChild(t),t.classList.add("native-ui__modal-bottom-buttons");const n=document.createElement("button");t.appendChild(n),n.classList.add("button"),n.onclick=qi,n.innerText="Launch AR"}function tl(e){Ke=e,rl(),nl(),el()}function nl(){const e=document.createElement("div");e.classList.add("native-ui__qr-container");const t=document.createElement("p");e.appendChild(t),t.style.marginBottom="0px",t.innerText="Scan this QR code to view in AR on your device:",Ye=document.createElement("img"),Ye.style.width="100%",Ye.style.aspectRatio="1",e.appendChild(Ye),Ye.alt="";const n=document.createElement("p");e.appendChild(n),n.classList.add("note");const r=document.createTextNode("Already on an AR-enabled device? Click ");n.appendChild(r);const i=document.createElement("a");n.appendChild(i),i.href="#",i.text="here",i.addEventListener("click",s=>{s.preventDefault(),qi()});const o=document.createTextNode(" to launch AR.");n.appendChild(o),Ke.appendChild(e)}function rl(){Ke.innerHTML+=`<div class="native-ui__qr-loader">
  <div class="native-ui__qr-loader__content">
    <div class="native-ui__qr-loader__spinner"></div>
    <div class="native-ui__qr-loader__text">
      <p>Generating AR experience...</p>
    </div>
  </div>
</div>`}function qi(){return ji(),!1}function il(e){ji=e}function zi(e){e?Ke.classList.add("ar-is-loading"):Ke.classList.remove("ar-is-loading")}function ol(e){Ye.src=e}const sn="data-av-ar-trigger",hr="native-button-location",pr="native-button",gr="no-native-modals",Wi="bottom left";class sl extends HTMLElement{constructor(){super(...arguments);f(this,kt);f(this,In);f(this,On);f(this,rt);f(this,Ut);f(this,Mt,void 0);f(this,F,void 0);f(this,Oe,void 0);f(this,K,void 0);f(this,fe,void 0);f(this,Le,void 0)}get qrCode(){return!l(this,Le)&&l(this,K)&&g(this,Le,l(this,K).generateQRCode()),l(this,Le)}_init(n,r){g(this,Mt,n.visual),g(this,F,r),g(this,fe,new Map);const i=`<svg class="native-ui__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <use xlink:href="#icon--view-in-ar" class="line-shadow" />
  <g id="icon--view-in-ar">
    <path d="M4 7v-1a2 2 0 0 1 2 -2h1" />
    <path d="M4 17v1a2 2 0 0 0 2 2h1" />
    <path d="M17 4h1a2 2 0 0 1 2 2v1" />
    <path d="M17 20h1a2 2 0 0 0 2 -2v-1" />
    <polyline points="12 7 17 9.5 17 14.5 12 17 7 14.5 7 9.5 12 7" />
    <line x1="7" y1="9.5" x2="12" y2="12" />
    <line x1="17" y1="9.5" x2="12" y2="12" />
    <line x1="12" y1="17" x2="12" y2="12" />
  </g>
</svg>`;l(this,F).createButton("av-ar","View in AR",i,this.getAttribute(hr)||Wi,this.hasAttribute(pr),y(this,kt,Tr).bind(this,!0)),il(this.launchAR.bind(this)),l(this,F).createModal("av-ar","View in Augmented Reality",tl),document.querySelectorAll(`button[${sn}]`).forEach(s=>y(this,rt,Nn).call(this,s)),new MutationObserver(s=>{s.forEach(a=>{const{addedNodes:c,removedNodes:u}=a;a.type==="attributes"&&c.length===0&&u.length===0&&(a.target===this?a.attributeName===pr?l(this,F).setButtonVisibility("av-ar",this.hasAttribute(pr)):a.attributeName===hr&&l(this,F).setButtonLocation("av-ar",this.getAttribute(hr)||Wi):a.target.tagName==="BUTTON"&&a.attributeName===sn&&(a.target.hasAttribute(sn)?y(this,rt,Nn).call(this,a.target):y(this,Ut,Sr).call(this,a.target))),u.forEach(d=>y(this,Ut,Sr).call(this,d)),c.forEach(d=>{d.tagName==="BUTTON"&&d.hasAttribute(sn)&&y(this,rt,Nn).call(this,d)})})}).observe(document,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0})}_setProductComponents(n,r){r.forEach(i=>{i.onSetValue.add(y(this,On,Mo).bind(this))})}invalidateQRCode(){g(this,Oe,void 0),g(this,K,void 0),g(this,Le,void 0)}launchAR(){!l(this,K)||l(this,K).launchAR()}showNativeButton(n){l(this,F).setButtonVisibility("av-ar",n)}}Mt=new WeakMap,F=new WeakMap,Oe=new WeakMap,K=new WeakMap,fe=new WeakMap,Le=new WeakMap,kt=new WeakSet,Tr=async function(n){l(this,Oe)?l(this,K)?(n&&l(this,F).setModalVisibility("av-ar",!this.hasAttribute(gr)),this.dispatchEvent(new CustomEvent("ar-code-generated"))):n&&l(this,F).setModalVisibility("av-ar",!this.hasAttribute(gr)):(zi(!0),n&&l(this,F).setModalVisibility("av-ar",!this.hasAttribute(gr)),g(this,Oe,window.Atlatl.ARScene.create(l(this,Mt),{onProgress:y(this,In,No).bind(this)})),g(this,K,await l(this,Oe)),this.dispatchEvent(new CustomEvent("ar-code-generated")),ol(`data:image/png;base64,${this.qrCode}`),zi(!1))},In=new WeakSet,No=function(n){const r=new CustomEvent("ar-code-status",{detail:{currentStep:n.currentStep,totalSteps:n.totalSteps,overallProgress:n.overallProgress}});this.dispatchEvent(r)},On=new WeakSet,Mo=function(){this.invalidateQRCode()},rt=new WeakSet,Nn=function(n){if(l(this,fe).has(n))return;const r=y(this,kt,Tr).bind(this,!1);n.addEventListener("click",r),l(this,fe).set(n,r)},Ut=new WeakSet,Sr=function(n){const r=l(this,fe).get(n);n.removeEventListener("click",r),l(this,fe).delete(n)},customElements.get("av-ar")||customElements.define("av-ar",sl);const al=/(\d+)\D+(\d+)\D+(\d+)/,Yi="data-av-event",Ki="data-av-property",Ji="title",Xi="data-av-value",It=new P("Native Button Utility");function cl(e){const t=al.exec(e);if(t&&t.length===4)return t.slice(1,4).map(n=>parseInt(n,10))}function Qi(e,t){if(e.getElementsByTagName("svg").length!==0)return e.innerHTML;if(e.innerHTML.trim())return`<svg class="native-ui__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <use xlink:href="#icon--native-button-${t}" class="line-shadow" />
  <g id="icon--native-button-${t}">
    ${e.innerHTML}
  </g>
</svg>`}function ul(e,t){e.dispatchEvent(new CustomEvent("av-native-button-clicked",{detail:{eventSource:t}}))}function ll(e,t){if(t.hasAttribute(Ki)&&t.hasAttribute(Xi)){const r=t.getAttribute(Ki).split(",");let i=t.getAttribute(Xi);if(i==="true")i=!0;else if(i==="false")i=!1;else{const o=cl(i);o&&(i=o)}r.filter(o=>o.trim()).forEach(o=>e.setValue(o.trim(),i,t))}}function dl(e,t){t.hasAttribute(Yi)&&t.getAttribute(Yi).split(",").filter(i=>i.trim()).forEach(i=>{const o=i.trim();e.triggerEvent(o)})}function fl(e){if(e.length===0)return It.error("Custom Native UI buttons require that at least one button state must be defined."),!1;if(!e[0].innerHTML.trim())return It.error("Custom Native UI buttons require that the first button state has an icon defined."),!1;if(!Array.from(e).every(n=>n.hasAttribute(Ji)))return It.error(`One or more custom Native UI button states do not have a ${Ji} attribute.`),!1;const t=document.getElementsByTagName("av-product");return t.length>1?(It.error("More than one av-product element was found, custom Native UI buttons only support having a single Product defined."),!1):t.length===0?(It.error("No av-product elements were found, custom Native UI buttons require a single Product to be defined."),!1):!0}const mr="native-button-location",Zi="title",eo="bottom right";class vl extends HTMLElement{constructor(){super(...arguments);f(this,Ln);f(this,Re,void 0);f(this,ve,void 0);f(this,xe,void 0);f(this,Ne,void 0);f(this,it,void 0);f(this,ne,void 0);f(this,H,void 0)}static get observedAttributes(){return[mr]}_init(n,r,i){if(g(this,ve,r),g(this,Ne,i),g(this,xe,`av-native-button-${l(this,Ne)}`),g(this,ne,0),g(this,H,this.getElementsByTagName("av-native-button-state")),fl(l(this,H))){const o=l(this,H)[0].getAttribute(Zi),s=Qi(l(this,H)[0],l(this,Ne));g(this,Re,l(this,ve).createButton(l(this,xe),o,s,this.getAttribute(mr)||eo,!0,y(this,Ln,ko).bind(this))),Array.from(l(this,H)).forEach(a=>{a._init(l(this,Re))})}}attributeChangedCallback(n,r,i){if(l(this,ve))switch(n){case mr:l(this,ve).setButtonLocation(l(this,xe),i||eo);break}}_setProductComponents(n,r){g(this,it,new Gi(n[0],r[0]))}showNativeButton(n){l(this,ve).setButtonVisibility(l(this,xe),n)}}Re=new WeakMap,ve=new WeakMap,xe=new WeakMap,Ne=new WeakMap,it=new WeakMap,ne=new WeakMap,H=new WeakMap,Ln=new WeakSet,ko=function(){const n=l(this,H)[l(this,ne)];ll(l(this,it),n),dl(l(this,it),n),ul(this,n),n.active=!1,g(this,ne,l(this,ne)+1),l(this,ne)>=l(this,H).length&&g(this,ne,0);const r=l(this,H)[l(this,ne)];r.active=!0;const i=Qi(r,l(this,Ne));i&&l(this,Re).setSVG(i),l(this,Re).setTitle(r.getAttribute(Zi))},customElements.get("av-native-button")||customElements.define("av-native-button",vl);const to="title";class no extends HTMLElement{constructor(){super(...arguments);f(this,Bt,void 0);Ue(this,"active")}static get observedAttributes(){return[to]}_init(n){g(this,Bt,n)}attributeChangedCallback(n,r,i){if(this.active)switch(n){case to:l(this,Bt).setTitle(i);break}}}Bt=new WeakMap,customElements.get("av-native-button-state")||customElements.define("av-native-button-state",no);const ro="antialiasing",an="data-av-snapshot-trigger",hl="disable-save-to-disk",pl="file-name",io="height",br="native-button-location",yr="native-button",gl="no-native-modal",oo="width",so="bottom left",ao="1920",co="1080";class uo extends HTMLElement{constructor(){super(...arguments);f(this,Rn);f(this,ot);f(this,st);f(this,Dt);f(this,Pt,void 0);f(this,J,void 0);f(this,he,void 0)}_init(n,r){g(this,Pt,n.visual),g(this,J,r),g(this,he,new Map);const i=`<svg class="native-ui__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <use xlink:href="#icon--snapshot" class="line-shadow" />
  <g id="icon--snapshot">
    <path d="M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2" />
    <circle cx="12" cy="13" r="3" />
  </g>
</svg>`;l(this,J).createButton("av-snapshot","Take Snapshot",i,this.getAttribute(br)||so,this.hasAttribute(yr),()=>{this.hasAttribute(gl)?y(this,ot,Mn).call(this,void 0):y(this,Rn,Uo).call(this)}),l(this,J).createModal("av-snapshot","Capture Snapshot",s=>{function a(m,S,x){const N=document.createElement("tr"),B=document.createElement("td");N.appendChild(B);const O=document.createElement("label");O.classList.add("native-ui__input-label"),O.setAttribute("for",`input-screenshot-${S.toLowerCase()}`),O.innerText=`${S}:`,B.appendChild(O);const p=document.createElement("td");p.classList.add("native-ui__input-group"),N.appendChild(p);const I=document.createElement("input");I.id=`input-screenshot-${S.toLowerCase()}`,I.classList.add("native-ui__input"),I.setAttribute("min","1"),I.setAttribute("type","number"),I.setAttribute("value",x),p.appendChild(I);const $=document.createElement("span");return $.classList.add("native-ui__input-group-label"),$.innerText="px",p.appendChild($),m.appendChild(N),I}function c(m){const S=document.createElement("tr"),x=document.createElement("td");S.appendChild(x);const N=document.createElement("label");N.classList.add("native-ui__input-label"),N.setAttribute("for","input-screenshot-antialiasing"),N.innerText="Antialiasing:",x.appendChild(N);const B=document.createElement("td");S.appendChild(B);const O=document.createElement("label");O.classList.add("native-ui__input-label"),B.appendChild(O);const p=document.createElement("input");p.id="input-screenshot-antialiasing",p.classList.add("native-ui__input--toggle-switch"),p.classList.add("visually-hidden"),p.setAttribute("type","checkbox"),O.appendChild(p);const I=document.createElement("span");I.classList.add("native-ui__toggle-switch"),O.appendChild(I);const $=document.createElement("span");$.classList.add("native-ui__toggle-switch__text--on"),$.innerText="On",O.appendChild($);const ct=document.createElement("span");return ct.classList.add("native-ui__toggle-switch__text--off"),ct.innerText="Off",O.appendChild(ct),m.appendChild(S),p}const u=document.createElement("table");u.classList.add("native-ui__options-table");const d=a(u,"Width",this.getAttribute(oo)||ao),h=a(u,"Height",this.getAttribute(io)||co),_=c(u);_.checked=this.getAttribute(ro)!=="false",s.appendChild(u);const v=document.createElement("div");v.classList.add("native-ui__modal-bottom-buttons");const E=document.createElement("button");E.classList.add("button"),E.innerText="Take Snapshot",E.addEventListener("click",y(this,ot,Mn).bind(this,()=>({width:parseInt(d.value,10),height:parseInt(h.value,10),antialiasing:_.checked}))),v.appendChild(E),s.appendChild(v)}),document.querySelectorAll(`button[${an}]`).forEach(s=>{y(this,st,kn).call(this,s)}),new MutationObserver(s=>{s.forEach(a=>{const{addedNodes:c,removedNodes:u}=a;a.type==="attributes"&&c.length===0&&u.length===0&&(a.target===this&&a.attributeName===yr?l(this,J).setButtonVisibility("av-snapshot",this.hasAttribute(yr)):a.target===this&&a.attributeName===br?l(this,J).setButtonLocation("av-snapshot",this.getAttribute(br)||so):a.target.tagName==="BUTTON"&&a.attributeName===an&&(a.target.hasAttribute(an)?y(this,st,kn).call(this,a.target):y(this,Dt,Ar).call(this,a.target))),u.forEach(d=>{y(this,Dt,Ar).call(this,d)}),c.forEach(d=>{d.tagName==="BUTTON"&&d.hasAttribute(an)&&y(this,st,kn).call(this,d)})})}).observe(document,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0})}showNativeButton(n){l(this,J).setButtonVisibility("av-snapshot",n)}}Pt=new WeakMap,J=new WeakMap,he=new WeakMap,Rn=new WeakSet,Uo=function(){l(this,J).setModalVisibility("av-snapshot",!0)},ot=new WeakSet,Mn=async function(n){const r=n?n():void 0,i=(r==null?void 0:r.width)||parseInt(this.getAttribute(oo)||ao,10),o=(r==null?void 0:r.height)||parseInt(this.getAttribute(io)||co,10),s=(r==null?void 0:r.antialiasing)||this.getAttribute(ro)!=="false",c={name:this.getAttribute(pl)||"snapshot",antialiasing:s,sizeOptions:{width:i,height:o}};this.hasAttribute(hl)&&(c.imageHandler=()=>{});const u=await l(this,Pt).captureImage(c);this.dispatchEvent(new CustomEvent("snapshot-taken",{detail:u}))},st=new WeakSet,kn=function(n){if(l(this,he).has(n))return;const r=y(this,ot,Mn).bind(this,void 0);n.addEventListener("click",r),l(this,he).set(n,r)},Dt=new WeakSet,Ar=function(n){const r=l(this,he).get(n);n.removeEventListener("click",r),l(this,he).delete(n)},customElements.get("av-snapshot")||customElements.define("av-snapshot",uo);const Er="native-button-location",_r="native-button",lo="bottom right";class fo extends HTMLElement{constructor(){super(...arguments);f(this,xn);f(this,Vt);f(this,at,void 0);f(this,Me,void 0);f(this,ke,{inactive:{label:"Toggle Fullscreen",icon:`<svg class="native-ui__icon native-ui__icon--fullscreen" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <use xlink:href="#icon--fullscreen" class="line-shadow line-shadow--fullscreen" />
  <g id="icon--fullscreen">
    <path d="M4 8v-2a2 2 0 0 1 2 -2h2" />
    <path d="M4 16v2a2 2 0 0 0 2 2h2" />
    <path d="M16 4h2a2 2 0 0 1 2 2v2" />
    <path d="M16 20h2a2 2 0 0 0 2 -2v-2" />
  </g>
</svg>`},active:{label:"Toggle Fullscreen",icon:`<svg class="native-ui__icon native-ui__icon--fullscreen-close" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
  <use xlink:href="#icon--fullscreen-close" class="line-shadow" />
  <g id="icon--fullscreen-close">
    <path d="M16 20v-2a2 2 0 0 1 2 -2h2" />
    <path d="M16 4v2a2 2 0 0 0 2 2h2" />
    <path d="M4 16h2a2 2 0 0 1 2 2v2" />
    <path d="M4 8h2a2 2 0 0 0 2 -2v-2" />
  </g>
</svg>`}});f(this,pe,void 0)}_init(n,r){g(this,at,n),g(this,pe,r),!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)&&(g(this,Me,l(this,pe).createButton("av-fullscreen",l(this,ke).inactive.label,l(this,ke).inactive.icon,this.getAttribute(Er)||lo,this.hasAttribute(_r),()=>{y(this,xn,Bo).call(this)})),document.addEventListener("fullscreenchange",()=>y(this,Vt,Cr).call(this)),document.addEventListener("webkitfullscreenchange",()=>y(this,Vt,Cr).call(this)),new MutationObserver(i=>{i.forEach(o=>{o.attributeName===_r?l(this,pe).setButtonVisibility("av-fullscreen",this.hasAttribute(_r)):o.attributeName===Er&&l(this,pe).setButtonLocation("av-fullscreen",this.getAttribute(Er)||lo)})}).observe(this,{attributes:!0,attributeOldValue:!0}))}showNativeButton(n){!l(this,Me)||l(this,pe).setButtonVisibility("av-fullscreen",n)}}at=new WeakMap,Me=new WeakMap,ke=new WeakMap,pe=new WeakMap,xn=new WeakSet,Bo=function(){var n,r,i,o,s,a;document.fullscreenElement||document.webkitFullscreenElement?((n=document.exitFullscreen)==null||n.call(document),(r=document.webkitExitFullscreen)==null||r.call(document)):((o=(i=l(this,at)).requestFullscreen)==null||o.call(i),(a=(s=l(this,at)).webkitRequestFullscreen)==null||a.call(s))},Vt=new WeakSet,Cr=function(){document.fullscreenElement||document.webkitFullscreenElement?l(this,Me).setSVG(l(this,ke).active.icon):l(this,Me).setSVG(l(this,ke).inactive.icon)},customElements.get("av-fullscreen")||customElements.define("av-fullscreen",fo),w.BindingLoaderComponent=Hi,w.FullscreenComponent=fo,w.NativeButtonStateComponent=no,w.ProductComponent=$i,w.SnapshotComponent=uo,w.VisualComponent=Fi,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
