var module_198061147393=void function(){"use strict";class HybridCarousel{constructor(container){this.container=container,this.track=container.querySelector(".carousel-track"),this.slides=Array.from(container.querySelectorAll(".carousel-slide")),this.dots=Array.from(container.querySelectorAll(".carousel-dot")),this.currentIndex=0,this.autoplayInterval=null,this.autoplayDelay=9e3,this.wistiaPlayers={},this.html5Videos={},this.isTransitioning=!1,this.slideCount=this.slides.length,console.log("Hybrid carousel initialized with",this.slideCount,"slides"),this.init()}init(){this.updateCarousel(!1),this.initializeWistiaPlayers(),this.initializeHTML5Videos(),this.prevButton&&this.prevButton.addEventListener("click",()=>this.prev()),this.nextButton&&this.nextButton.addEventListener("click",()=>this.next()),this.dots.forEach((dot,index)=>{dot.addEventListener("click",()=>this.goToSlide(index))}),this.container.addEventListener("mouseenter",()=>this.pauseAutoplay()),this.container.addEventListener("mouseleave",()=>this.startAutoplay()),document.addEventListener("visibilitychange",()=>{document.hidden?(this.pauseAutoplay(),this.pauseAllVideos()):this.startAutoplay()}),setTimeout(()=>this.startAutoplay(),2e3)}initializeHTML5Videos(){console.log("Finding HTML5 video elements..."),this.slides.forEach((slide,index)=>{const videoElement=slide.querySelector("video");videoElement&&(console.log(`Slide ${index}: Found HTML5 video`),this.html5Videos[index]=videoElement,videoElement.addEventListener("ended",()=>{index===this.currentIndex&&(console.log("HTML5 video ended, moving to next"),setTimeout(()=>this.next(),500))}),0===index&&setTimeout(()=>{console.log("Playing first HTML5 video"),this.playCurrentVideo()},1500))})}initializeWistiaPlayers(){console.log("Waiting for Wistia API...");const waitForWistia=()=>{window.Wistia?(console.log("Wistia API loaded, finding players..."),setTimeout(()=>this.findWistiaPlayers(),1e3)):setTimeout(waitForWistia,200)};waitForWistia()}findWistiaPlayers(){this.slides.forEach((slide,index)=>{const wistiaEmbed=slide.querySelector(".wistia_embed");if(wistiaEmbed){const classes=wistiaEmbed.className.split(" ");let videoId=null;for(let className of classes)if(className.startsWith("wistia_async_")){videoId=className.replace("wistia_async_","");break}videoId&&(console.log(`Slide ${index}: Found Wistia video ${videoId}`),window._wq=window._wq||[],window._wq.push({id:videoId,onReady:video=>{console.log(`Slide ${index}: Wistia video ready`),this.wistiaPlayers[index]=video,video.mute(),video.volume(0),video.bind("heightchange",()=>{video.controls(!1)}),video.bind("end",()=>{index===this.currentIndex&&(console.log("Wistia video ended, moving to next"),setTimeout(()=>this.next(),500))}),0===index&&setTimeout(()=>{console.log("Playing first Wistia video"),this.playCurrentVideo()},1500)}}))}})}updateCarousel(animate=!0){this.slides.forEach(slide=>{slide.classList.remove("active","adjacent-left","adjacent-right","far-left","far-right")}),this.slides.forEach((slide,index)=>{const relativePos=(index-this.currentIndex+this.slideCount)%this.slideCount;0===relativePos?slide.classList.add("active"):1===relativePos?slide.classList.add("adjacent-right"):relativePos===this.slideCount-1?slide.classList.add("adjacent-left"):2===relativePos?slide.classList.add("far-right"):relativePos===this.slideCount-2&&slide.classList.add("far-left")}),this.dots.forEach((dot,index)=>{dot.classList.toggle("active",index===this.currentIndex)}),setTimeout(()=>this.handleVideoPlayback(),animate?700:0)}handleVideoPlayback(){console.log("Handling video for slide",this.currentIndex),this.pauseAllVideos(),setTimeout(()=>this.playCurrentVideo(),300)}playCurrentVideo(){const currentSlide=this.slides[this.currentIndex],wistiaPlayer=this.wistiaPlayers[this.currentIndex],html5Video=this.html5Videos[this.currentIndex],videoCover=currentSlide.querySelector(".video-cover");return html5Video?(console.log(`Playing HTML5 video on slide ${this.currentIndex}`),videoCover&&setTimeout(()=>{videoCover.classList.add("hidden")},500),html5Video.currentTime=0,void html5Video.play().then(()=>{console.log("HTML5 video playing")}).catch(err=>{console.warn("HTML5 autoplay prevented:",err)})):wistiaPlayer?(console.log(`Playing Wistia video on slide ${this.currentIndex}`),videoCover&&setTimeout(()=>{videoCover.classList.add("hidden"),console.log("Cover hidden")},500),wistiaPlayer.time(0),void wistiaPlayer.play().then(()=>{console.log("Wistia video playing")}).catch(err=>{console.warn("Wistia autoplay prevented:",err)})):(console.log("No video for slide",this.currentIndex),void(videoCover&&setTimeout(()=>videoCover.classList.add("hidden"),500)))}pauseAllVideos(){this.slides.forEach((slide,index)=>{const wistiaPlayer=this.wistiaPlayers[index];wistiaPlayer&&wistiaPlayer.pause();const html5Video=this.html5Videos[index];html5Video&&html5Video.pause();const videoCover=slide.querySelector(".video-cover");videoCover&&index!==this.currentIndex&&videoCover.classList.remove("hidden")})}next(){this.isTransitioning||(this.isTransitioning=!0,this.currentIndex=(this.currentIndex+1)%this.slideCount,this.updateCarousel(!0),this.resetAutoplay(),setTimeout(()=>{this.isTransitioning=!1},700))}prev(){this.isTransitioning||(this.isTransitioning=!0,this.currentIndex=(this.currentIndex-1+this.slideCount)%this.slideCount,this.updateCarousel(!0),this.resetAutoplay(),setTimeout(()=>{this.isTransitioning=!1},700))}goToSlide(index){this.isTransitioning||index===this.currentIndex||(this.isTransitioning=!0,this.currentIndex=index,this.updateCarousel(!0),this.resetAutoplay(),setTimeout(()=>{this.isTransitioning=!1},700))}startAutoplay(){this.pauseAutoplay(),this.autoplayInterval=setInterval(()=>{this.next()},this.autoplayDelay),console.log("Autoplay started")}pauseAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}resetAutoplay(){this.startAutoplay()}}function initCarousels(){console.log("Initializing hybrid carousels...");const carousels=document.querySelectorAll(".carousel-container");console.log("Found",carousels.length,"containers"),carousels.forEach(carousel=>{new HybridCarousel(carousel)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initCarousels):initCarousels(),window.hsInEditor&&window.addEventListener("message",function(event){"hsModulesReady"===event.data.type&&setTimeout(initCarousels,100)})}();
//# sourceURL=https://20676444.fs1.hubspotusercontent-na1.net/hubfs/20676444/hub_generated/module_assets/1/198061147393/1769439705450/module_Homepage_Image_and_Video_Rotary.js